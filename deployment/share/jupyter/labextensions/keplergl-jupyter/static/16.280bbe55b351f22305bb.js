"use strict";(self.webpackChunkkeplergl_jupyter=self.webpackChunkkeplergl_jupyter||[]).push([[16],{70016:(e,r,t)=>{t.r(r),t.d(r,{JSONLoader:()=>Ir,NullLoader:()=>Ur,NullWorkerLoader:()=>Fr,RequestScheduler:()=>jr.A,_BrowserFileSystem:()=>Vr,_fetchProgress:()=>Nr,_unregisterLoaders:()=>ce,assert:()=>I.v,concatenateArrayBuffersAsync:()=>Je,document:()=>O.Al,encode:()=>Mr,encodeInBatches:()=>Wr,encodeSync:()=>Sr,encodeText:()=>Er,encodeURLtoURL:()=>Tr,fetchFile:()=>T,forEach:()=>Ne,getLoaderOptions:()=>K,getPathPrefix:()=>i,global:()=>O.Sf,isAsyncIterable:()=>y,isBrowser:()=>O.Bd,isIterable:()=>h,isIterator:()=>p,isPromise:()=>d,isPureObject:()=>f,isReadableStream:()=>b,isResponse:()=>w,isWorker:()=>O.xD,isWritableStream:()=>v,load:()=>nr,loadInBatches:()=>or,makeIterator:()=>He,makeLineIterator:()=>$r,makeNumberedLineIterator:()=>Hr,makeStream:()=>Lr,makeTextDecoderIterator:()=>zr,makeTextEncoderIterator:()=>qr,parse:()=>er,parseInBatches:()=>tr,parseSync:()=>rr,readArrayBuffer:()=>L,readFileSync:()=>Q,registerLoaders:()=>ae,resolvePath:()=>a,save:()=>Cr,saveSync:()=>Rr,selectLoader:()=>he,selectLoaderSync:()=>ye,self:()=>O.bg,setLoaderOptions:()=>X,setPathPrefix:()=>s,window:()=>O.x,writeFile:()=>N,writeFileSync:()=>J});let n="";const o={};function s(e){n=e}function i(){return n}function a(e){for(const r in o)if(e.startsWith(r)){const t=o[r];e=e.replace(r,t)}return e.startsWith("http://")||e.startsWith("https://")||(e="".concat(n).concat(e)),e}const c=e=>"boolean"==typeof e,u=e=>"function"==typeof e,l=e=>null!==e&&"object"==typeof e,f=e=>l(e)&&e.constructor==={}.constructor,d=e=>l(e)&&u(e.then),h=e=>e&&"function"==typeof e[Symbol.iterator],y=e=>e&&"function"==typeof e[Symbol.asyncIterator],p=e=>e&&u(e.next),w=e=>"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,g=e=>"undefined"!=typeof Blob&&e instanceof Blob,m=e=>e&&"object"==typeof e&&e.isBuffer,b=e=>(e=>"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||l(e)&&u(e.tee)&&u(e.cancel)&&u(e.getReader))(e)||(e=>l(e)&&u(e.read)&&u(e.pipe)&&c(e.readable))(e),v=e=>(e=>l(e)&&u(e.abort)&&u(e.getWriter))(e)||(e=>l(e)&&u(e.end)&&u(e.write)&&c(e.writable))(e),k=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,A=/^([-\w.]+\/[-\w.+]+)/;function x(e){const r=k.exec(e);return r?r[1]:""}const _=/\?.*/;function B(e){return e.replace(_,"")}function M(e){return w(e)?e.url:g(e)?e.name||"":"string"==typeof e?e:""}function S(e){if(w(e)){const r=e,t=r.headers.get("content-type")||"",n=B(r.url);return function(e){const r=A.exec(e);return r?r[1]:e}(t)||x(n)}return g(e)?e.type||"":"string"==typeof e?x(e):""}async function E(e){if(w(e))return e;const r={},t=function(e){return w(e)?e.headers["content-length"]||-1:g(e)?e.size:"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}(e);t>=0&&(r["content-length"]=String(t));const n=M(e),o=S(e);o&&(r["content-type"]=o);const s=await async function(e){if("string"==typeof e)return"data:,".concat(e.slice(0,5));if(e instanceof Blob){const r=e.slice(0,5);return await new Promise((e=>{const t=new FileReader;t.onload=r=>{var t;return e(null==r||null===(t=r.target)||void 0===t?void 0:t.result)},t.readAsDataURL(r)}))}if(e instanceof ArrayBuffer){const r=function(e){let r="";const t=new Uint8Array(e);for(let e=0;e<t.byteLength;e++)r+=String.fromCharCode(t[e]);return btoa(r)}(e.slice(0,5));return"data:base64,".concat(r)}return null}(e);s&&(r["x-first-bytes"]=s),"string"==typeof e&&(e=(new TextEncoder).encode(e));const i=new Response(e,{headers:r});return Object.defineProperty(i,"url",{value:n}),i}async function W(e){if(!e.ok){const r=await async function(e){let r="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const t=e.headers.get("Content-Type");let n=e.statusText;t.includes("application/json")&&(n+=" ".concat(await e.text())),r+=n,r=r.length>60?"".concat(r.slice(0,60),"..."):r}catch(e){}return r}(e);throw new Error(r)}}async function T(e,r){if("string"==typeof e){e=a(e);let t=r;return null!=r&&r.fetch&&"function"!=typeof(null==r?void 0:r.fetch)&&(t=r.fetch),await fetch(e,t)}return await E(e)}const P=null,C=null,R=null,j=null;async function L(e,r,t){if("number"==typeof e)return await j(e,r,t);e instanceof Blob||(e=new Blob([e]));const n=e.slice(r,r+t);return await async function(e){return await new Promise(((r,t)=>{const n=new FileReader;n.onload=e=>{var t;return r(null==e||null===(t=e.target)||void 0===t?void 0:t.result)},n.onerror=e=>t(e),n.readAsArrayBuffer(e)}))}(n)}var O=t(83921);function F(e){throw new Error("Buffer not supported in browser")}function D(e){return F?F():e}function U(e){if((r=e)&&"object"==typeof r&&r.isBuffer)return e;var r;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"==typeof e){const r=e;return(new TextEncoder).encode(r).buffer}if(e&&"object"==typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}var I=t(17243);function Q(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=a(e),!O.Bd){const t=P(e,r);return"string"!=typeof t?U(t):t}return r.nothrow||(0,I.v)(!1),null}async function N(e,r,t){e=a(e),O.Bd||await C(e,D(r),{flag:"w"}),(0,I.v)(!1)}function J(e,r,t){e=a(e),O.Bd||R(e,D(r),{flag:"w"}),(0,I.v)(!1)}var V=t(67136),z=t(91317);const q=new z.t({id:"loaders.gl"});class ${log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}const H={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){(0,V.A)(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.console.log.bind(this.console,...r)}info(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.console.info.bind(this.console,...r)}warn(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.console.warn.bind(this.console,...r)}error(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return this.console.error.bind(this.console,...r)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:O.Bd,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Y={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function G(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const K=()=>{const e=G();return e.globalOptions=e.globalOptions||{...H},e.globalOptions};function X(e){const r=G(),t=K();r.globalOptions=te(t,e)}function Z(e,r,t,n){return t=t||[],function(e,r){ee(e,null,H,Y,r);for(const t of r){const n=e&&e[t.id]||{},o=t.options&&t.options[t.id]||{},s=t.deprecatedOptions&&t.deprecatedOptions[t.id]||{};ee(n,t.id,o,s,r)}}(e,t=Array.isArray(t)?t:[t]),te(r,e,n)}function ee(e,r,t,n,o){const s=r||"Top level",i=r?"".concat(r,"."):"";for(const a in e){const c=!r&&l(e[a]);if(!(a in t)&&("baseUri"!==a||r)&&("workerUrl"!==a||!r))if(a in n)q.warn("".concat(s," loader option '").concat(i).concat(a,"' no longer supported, use '").concat(n[a],"'"))();else if(!c){const e=re(a,o);q.warn("".concat(s," loader option '").concat(i).concat(a,"' not recognized. ").concat(e))()}}}function re(e,r){const t=e.toLowerCase();let n="";for(const o of r)for(const r in o.options){if(e===r)return"Did you mean '".concat(o.id,".").concat(r,"'?");const s=r.toLowerCase();(t.startsWith(s)||s.startsWith(t))&&(n=n||"Did you mean '".concat(o.id,".").concat(r,"'?"))}return n}function te(e,r,t){const n={...e.options||{}};return function(e,r){r&&!("baseUri"in e)&&(e.baseUri=r)}(n,t),null===n.log&&(n.log=new $),ne(n,K()),ne(n,r),n}function ne(e,r){for(const t in r)if(t in r){const n=r[t];f(n)&&f(e[t])?e[t]={...e[t],...r[t]}:e[t]=r[t]}}function oe(e){var r;return!!e&&(Array.isArray(e)&&(e=e[0]),Array.isArray(null===(r=e)||void 0===r?void 0:r.extensions))}function se(e){var r,t;let n;return(0,I.v)(e,"null loader"),(0,I.v)(oe(e),"invalid loader"),Array.isArray(e)&&(n=e[1],e=e[0],e={...e,options:{...e.options,...n}}),(null!==(r=e)&&void 0!==r&&r.parseTextSync||null!==(t=e)&&void 0!==t&&t.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const ie=()=>{const e=G();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function ae(e){const r=ie();e=Array.isArray(e)?e:[e];for(const t of e){const e=se(t);r.find((r=>e===r))||r.unshift(e)}}function ce(){G().loaderRegistry=[]}var ue=t(16562),le=t(57345);const fe=new z.t({id:"loaders.gl"}),de=/\.([^.]+)$/;async function he(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!pe(e))return null;let o=ye(e,r,{...t,nothrow:!0},n);if(o)return o;if(g(e)&&(o=ye(e=await e.slice(0,10).arrayBuffer(),r,t,n)),!(o||null!=t&&t.nothrow))throw new Error(we(e));return o}function ye(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!pe(e))return null;if(r&&!Array.isArray(r))return se(r);let o=[];r&&(o=o.concat(r)),null!=t&&t.ignoreRegisteredLoaders||o.push(...ie()),function(e){for(const r of e)se(r)}(o);const s=function(e,r,t,n){const o=M(e),s=S(e),i=B(o)||(null==n?void 0:n.url);let a=null,c="";var u;return null!=t&&t.mimeType&&(a=ge(r,null==t?void 0:t.mimeType),c="match forced by supplied MIME type ".concat(null==t?void 0:t.mimeType)),a=a||function(e,r){const t=r&&de.exec(r),n=t&&t[1];return n?function(e,r){r=r.toLowerCase();for(const t of e)for(const e of t.extensions)if(e.toLowerCase()===r)return t;return null}(e,n):null}(r,i),c=c||(a?"matched url ".concat(i):""),a=a||ge(r,s),c=c||(a?"matched MIME type ".concat(s):""),a=a||function(e,r){if(!r)return null;for(const t of e)if("string"==typeof r){if(me(r,t))return t}else if(ArrayBuffer.isView(r)){if(be(r.buffer,r.byteOffset,t))return t}else if(r instanceof ArrayBuffer&&be(r,0,t))return t;return null}(r,e),c=c||(a?"matched initial data ".concat(ve(e)):""),a=a||ge(r,null==t?void 0:t.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(s):""),c&&fe.log(1,"selectLoader selected ".concat(null===(u=a)||void 0===u?void 0:u.name,": ").concat(c,".")),a}(e,o,t,n);if(!(s||null!=t&&t.nothrow))throw new Error(we(e));return s}function pe(e){return!(e instanceof Response&&204===e.status)}function we(e){const r=M(e),t=S(e);let n="No valid loader found (";n+=r?"".concat(ue.iW(r),", "):"no url provided, ",n+="MIME type: ".concat(t?'"'.concat(t,'"'):"not provided",", ");const o=e?ve(e):"";return n+=o?' first bytes: "'.concat(o,'"'):"first bytes: not available",n+=")",n}function ge(e,r){for(const t of e){if(t.mimeTypes&&t.mimeTypes.includes(r))return t;if(r==="application/x.".concat(t.id))return t}return null}function me(e,r){return r.testText?r.testText(e):(Array.isArray(r.tests)?r.tests:[r.tests]).some((r=>e.startsWith(r)))}function be(e,r,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some((n=>function(e,r,t,n){if(n instanceof ArrayBuffer)return(0,le.YV)(n,e,n.byteLength);switch(typeof n){case"function":return n(e,t);case"string":return n===ke(e,r,n.length);default:return!1}}(e,r,t,n)))}function ve(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof e?e.slice(0,r):ArrayBuffer.isView(e)?ke(e.buffer,e.byteOffset,r):e instanceof ArrayBuffer?ke(e,0,r):""}function ke(e,r,t){if(e.byteLength<r+t)return"";const n=new DataView(e);let o="";for(let e=0;e<t;e++)o+=String.fromCharCode(n.getUint8(r+e));return o}function Ae(e,r){if(!e)throw new Error(r||"loaders.gl assertion failed.")}var xe=t(65606);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==t.g&&t.g,"undefined"!=typeof document&&document;const _e="object"!=typeof xe||"[object process]"!==String(xe)||xe.browser,Be="undefined"!=typeof window&&void 0!==window.orientation,Me=void 0!==xe&&xe.version&&/v([0-9]*)/.exec(xe.version);Me&&parseFloat(Me[1]);class Se{terminate(){}}function Ee(e,r){if(!e)throw new Error(r||"loaders.gl assertion failed.")}const We=new Map;function Te(e){const r=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(r)}function Pe(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2?arguments[2]:void 0;const n=t||new Set;if(e)if(Ce(e))n.add(e);else if(Ce(e.buffer))n.add(e.buffer);else if(ArrayBuffer.isView(e));else if(r&&"object"==typeof e)for(const t in e)Pe(e[t],r,n);return void 0===t?Array.from(n):[]}function Ce(e){return!!e&&(e instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&e instanceof MessagePort||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)}const Re=()=>{};class je{static isSupported(){return"undefined"!=typeof Worker&&_e||void 0!==Se&&!_e}constructor(e){(0,V.A)(this,"name",void 0),(0,V.A)(this,"source",void 0),(0,V.A)(this,"url",void 0),(0,V.A)(this,"terminated",!1),(0,V.A)(this,"worker",void 0),(0,V.A)(this,"onMessage",void 0),(0,V.A)(this,"onError",void 0),(0,V.A)(this,"_loadableURL","");const{name:r,source:t,url:n}=e;Ee(t||n),this.name=r,this.source=t,this.url=n,this.onMessage=Re,this.onError=e=>console.log(e),this.worker=_e?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Re,this.onError=Re,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,r){r=r||Pe(e),this.worker.postMessage(e,r)}_getErrorFromErrorEvent(e){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(r+="".concat(e.message," in ")),e.lineno&&(r+=":".concat(e.lineno,":").concat(e.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=function(e){Ee(e.source&&!e.url||!e.source&&e.url);let r=We.get(e.source||e.url);return r||(e.url&&(r=(t=e.url).startsWith("http")?Te("try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")):t,We.set(e.url,r)),e.source&&(r=Te(e.source),We.set(e.source,r))),Ee(r),r;var t}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>console.error(e),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Se(r,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new Se(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class Le{constructor(e,r){(0,V.A)(this,"name",void 0),(0,V.A)(this,"workerThread",void 0),(0,V.A)(this,"isRunning",!0),(0,V.A)(this,"result",void 0),(0,V.A)(this,"_resolve",(()=>{})),(0,V.A)(this,"_reject",(()=>{})),this.name=e,this.workerThread=r,this.result=new Promise(((e,r)=>{this._resolve=e,this._reject=r}))}postMessage(e,r){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:r})}done(e){Ee(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Ee(this.isRunning),this.isRunning=!1,this._reject(e)}}class Oe{static isSupported(){return je.isSupported()}constructor(e){(0,V.A)(this,"name","unnamed"),(0,V.A)(this,"source",void 0),(0,V.A)(this,"url",void 0),(0,V.A)(this,"maxConcurrency",1),(0,V.A)(this,"maxMobileConcurrency",1),(0,V.A)(this,"onDebug",(()=>{})),(0,V.A)(this,"reuseWorkers",!0),(0,V.A)(this,"props",{}),(0,V.A)(this,"jobQueue",[]),(0,V.A)(this,"idleQueue",[]),(0,V.A)(this,"count",0),(0,V.A)(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,r,t)=>e.done(t),t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,r)=>e.error(r);const n=new Promise((n=>(this.jobQueue.push({name:e,onMessage:r,onError:t,onStart:n}),this)));return this._startQueuedJob(),await n}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:e,backlog:this.jobQueue.length});const t=new Le(r.name,e);e.onMessage=e=>r.onMessage(t,e.type,e.payload),e.onError=e=>r.onError(t,e),r.onStart(t);try{await t.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new je({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Be?this.maxMobileConcurrency:this.maxConcurrency}}const Fe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class De{static isSupported(){return je.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return De._workerFarm=De._workerFarm||new De({}),De._workerFarm.setProps(e),De._workerFarm}constructor(e){(0,V.A)(this,"props",void 0),(0,V.A)(this,"workerPools",new Map),this.props={...Fe},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:r,source:t,url:n}=e;let o=this.workerPools.get(r);return o||(o=new Oe({name:r,source:t,url:n}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(0,V.A)(De,"_workerFarm",void 0);const Ue="latest";async function Ie(e,r,t,n,o){const s=e.id,i=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=r[e.id]||{},n="".concat(e.id,"-worker.js");let o=t.workerUrl;if(o||"compression"!==e.id||(o=r.workerUrl),"test"===r._workerType&&(o="modules/".concat(e.module,"/dist/").concat(n)),!o){let r=e.version;"latest"===r&&(r=Ue);const t=r?"@".concat(r):"";o="https://unpkg.com/@loaders.gl/".concat(e.module).concat(t,"/dist/").concat(n)}return Ee(o),o}(e,t),a=De.getWorkerFarm(t).getWorkerPool({name:s,url:i});t=JSON.parse(JSON.stringify(t)),n=JSON.parse(JSON.stringify(n||{}));const c=await a.startJob("process-on-worker",Qe.bind(null,o));c.postMessage("process",{input:r,options:t,context:n});const u=await c.result;return await u.result}async function Qe(e,r,t,n){switch(t){case"done":r.done(n);break;case"error":r.error(new Error(n.error));break;case"process":const{id:o,input:s,options:i}=n;try{const t=await e(s,i);r.postMessage("done",{id:o,result:t})}catch(e){const t=e instanceof Error?e.message:"unknown error";r.postMessage("error",{id:o,error:t})}break;default:console.warn("parse-with-worker unknown message ".concat(t))}}async function Ne(e,r){for(;;){const{done:t,value:n}=await e.next();if(t)return void e.return();if(r(n))return}}async function Je(e){const r=[];for await(const t of e)r.push(t);return(0,le.AQ)(...r)}const Ve=262144,ze=262144,qe=1048576;function $e(e,r){return O.Bd?async function*(e,r){const t=e.getReader();let n;try{for(;;){const e=n||t.read();null!=r&&r._streamReadAhead&&(n=t.read());const{done:o,value:s}=await e;if(o)return;yield U(s)}}catch(e){t.releaseLock()}}(e,r):async function*(e){for await(const r of e)yield U(r)}(e)}function He(e,r){if("string"==typeof e)return function*(e,r){const t=(null==r?void 0:r.chunkSize)||Ve;let n=0;const o=new TextEncoder;for(;n<e.length;){const r=Math.min(e.length-n,t),s=e.slice(n,n+r);n+=r,yield o.encode(s)}}(e,r);if(e instanceof ArrayBuffer)return function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:t=ze}=r;let n=0;for(;n<e.byteLength;){const r=Math.min(e.byteLength-n,t),o=new ArrayBuffer(r),s=new Uint8Array(e,n,r);new Uint8Array(o).set(s),n+=r,yield o}}()}(e,r);if(g(e))return async function*(e,r){const t=(null==r?void 0:r.chunkSize)||qe;let n=0;for(;n<e.size;){const r=n+t,o=await e.slice(n,r).arrayBuffer();n=r,yield o}}(e,r);if(b(e))return $e(e,r);if(w(e))return $e(e.body,r);throw new Error("makeIterator")}const Ye="Cannot convert supplied data type";function Ge(e,r,t){if(r.text&&"string"==typeof e)return e;if(m(e)&&(e=e.buffer),e instanceof ArrayBuffer){const t=e;return r.text&&!r.binary?new TextDecoder("utf8").decode(t):t}if(ArrayBuffer.isView(e)){if(r.text&&!r.binary)return new TextDecoder("utf8").decode(e);let t=e.buffer;const n=e.byteLength||e.length;return 0===e.byteOffset&&n===t.byteLength||(t=t.slice(e.byteOffset,e.byteOffset+n)),t}throw new Error(Ye)}function Ke(e,r){const t=K(),n=e||t;return"function"==typeof n.fetch?n.fetch:l(n.fetch)?e=>T(e,n):null!=r&&r.fetch?null==r?void 0:r.fetch:T}function Xe(e,r,t){if(t)return t;const n={fetch:Ke(r,e),...e};if(n.url){const e=B(n.url);n.baseUrl=e,n.queryString=function(e){const r=e.match(_);return r&&r[0]}(n.url),n.filename=ue.iW(e),n.baseUrl=ue.pD(e)}return Array.isArray(n.loaders)||(n.loaders=null),n}function Ze(e,r){if(!r&&e&&!Array.isArray(e))return e;let t;if(e&&(t=Array.isArray(e)?e:[e]),r&&r.loaders){const e=Array.isArray(r.loaders)?r.loaders:[r.loaders];t=t?[...t,...e]:e}return t&&t.length?t:null}async function er(e,r,t,n){Ae(!n||"object"==typeof n),!r||Array.isArray(r)||oe(r)||(n=void 0,t=r,r=void 0),t=t||{};const o=M(e=await e),s=Ze(r,n),i=await he(e,s,t);return i?(n=Xe({url:o,parse:er,loaders:s},t=Z(t,i,s,o),n||null),await async function(e,r,t,n){if(function(e){Ae(e,"no worker provided");e.version}(e),w(r)){const e=r,{ok:t,redirected:o,status:s,statusText:i,type:a,url:c}=e,u=Object.fromEntries(e.headers.entries());n.response={headers:u,ok:t,redirected:o,status:s,statusText:i,type:a,url:c}}if(r=await async function(e,r,t){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"==typeof e||n)return Ge(e,r);if(g(e)&&(e=await E(e)),w(e)){const t=e;return await W(t),r.binary?await t.arrayBuffer():await t.text()}if(b(e)&&(e=He(e,t)),h(e)||y(e))return Je(e);throw new Error(Ye)}(r,e,t),e.parseTextSync&&"string"==typeof r)return t.dataType="text",e.parseTextSync(r,t,n,e);if(function(e,r){return!!De.isSupported()&&!!(_e||null!=r&&r._nodeWorkers)&&e.worker&&(null==r?void 0:r.worker)}(e,t))return await Ie(e,r,t,n,er);if(e.parseText&&"string"==typeof r)return await e.parseText(r,t,n,e);if(e.parse)return await e.parse(r,t,n,e);throw Ae(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}(i,e,t,n)):null}function rr(e,r,t,n){(0,I.v)(!n||"object"==typeof n),Array.isArray(r)||oe(r)||(n=void 0,t=r,r=void 0),t=t||{};const o=Ze(r,n),s=ye(e,o,t);return s?function(e,r,t,n){if(r=Ge(r,e),e.parseTextSync&&"string"==typeof r)return e.parseTextSync(r,t);if(e.parseSync&&r instanceof ArrayBuffer)return e.parseSync(r,t,n);throw new Error("".concat(e.name," loader: 'parseSync' not supported by this loader, use 'parse' instead. ").concat(n.url||""))}(s,e,t=Z(t,s,o),n=Xe({url:M(e),parseSync:rr,parse:()=>{throw new Error("parseSync called parse (which is async")},loaders:r},t,n||null)):null}async function tr(e,r,t,n){(0,I.v)(!n||"object"==typeof n);const o=Array.isArray(r)?r:void 0;Array.isArray(r)||oe(r)||(n=void 0,t=r,r=void 0),t=t||{};const s=M(e=await e),i=await he(e,r,t);return i?(n=Xe({url:s,parseInBatches:tr,parse:er,loaders:o},t=Z(t,i,o,s),n||null),await async function(e,r,t,n){const o=await async function(e,r,t,n){const o=await async function(e,r){if(p(e))return e;if(w(e)){const t=e;return await W(t),He(await t.body,r)}return g(e)||b(e)?He(e,r):y(e)?e[Symbol.asyncIterator]():function(e){if(ArrayBuffer.isView(e))return function*(){yield e.buffer}();if(e instanceof ArrayBuffer)return function*(){yield e}();if(p(e))return e;if(h(e))return e[Symbol.iterator]();throw new Error(Ye)}(e)}(r,t),s=await async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=e;for await(const e of r)t=e(t);return t}(o,(null==t?void 0:t.transforms)||[]);if(e.parseInBatches)return e.parseInBatches(s,t,n);return async function*(){const r=await Je(s),o=await er(r,e,{...t,mimeType:e.mimeTypes[0]},n),i={mimeType:e.mimeTypes[0],shape:Array.isArray(o)?"row-table":"unknown",batchType:"data",data:o,length:Array.isArray(o)?o.length:1};yield i}()}(e,r,t,n);if(!t.metadata)return o;const s={batchType:"metadata",metadata:{_loader:e,_context:n},data:[],bytesUsed:0};return async function*(e){yield s,yield*e}(o)}(i,e,t,n)):null}async function nr(e,r,t,n){Array.isArray(r)||oe(r)||(t=r,r=void 0);const o=Ke(t);let s=e;return"string"==typeof e&&(s=await o(e)),g(e)&&(s=await o(e)),await er(s,r,t)}function or(e,r,t,n){Array.isArray(r)||oe(r)||(t=r,r=null);const o=Ke(t||{});return Array.isArray(e)?e.map((e=>sr(e,r,t,o))):sr(e,r,t,o)}async function sr(e,r,t,n){if("string"==typeof e){const o=e,s=await n(o);return await tr(s,r,t)}return await tr(e,r,t)}var ir=t(65606);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==t.g&&t.g,"undefined"!=typeof document&&document;const ar="object"!=typeof ir||"[object process]"!==String(ir)||ir.browser,cr="undefined"!=typeof window&&void 0!==window.orientation,ur=void 0!==ir&&ir.version&&/v([0-9]*)/.exec(ir.version);ur&&parseFloat(ur[1]);class lr{terminate(){}}const fr=new Map;function dr(e){const r=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(r)}function hr(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2?arguments[2]:void 0;const n=t||new Set;if(e)if(yr(e))n.add(e);else if(yr(e.buffer))n.add(e.buffer);else if(ArrayBuffer.isView(e));else if(r&&"object"==typeof e)for(const t in e)hr(e[t],r,n);return void 0===t?Array.from(n):[]}function yr(e){return!!e&&(e instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&e instanceof MessagePort||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)}function pr(e){if(null===e)return{};const r=Object.assign({},e);return Object.keys(r).forEach((t=>{"object"!=typeof e[t]||ArrayBuffer.isView(e[t])||e[t]instanceof Array?"function"==typeof r[t]||r[t]instanceof RegExp?r[t]={}:r[t]=e[t]:r[t]=pr(e[t])})),r}const wr=()=>{};class gr{static isSupported(){return"undefined"!=typeof Worker&&ar||void 0!==lr&&!ar}constructor(e){(0,V.A)(this,"name",void 0),(0,V.A)(this,"source",void 0),(0,V.A)(this,"url",void 0),(0,V.A)(this,"terminated",!1),(0,V.A)(this,"worker",void 0),(0,V.A)(this,"onMessage",void 0),(0,V.A)(this,"onError",void 0),(0,V.A)(this,"_loadableURL","");const{name:r,source:t,url:n}=e;Ae(t||n),this.name=r,this.source=t,this.url=n,this.onMessage=wr,this.onError=e=>console.log(e),this.worker=ar?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=wr,this.onError=wr,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,r){r=r||hr(e),this.worker.postMessage(e,r)}_getErrorFromErrorEvent(e){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(r+="".concat(e.message," in ")),e.lineno&&(r+=":".concat(e.lineno,":").concat(e.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=function(e){Ae(e.source&&!e.url||!e.source&&e.url);let r=fr.get(e.source||e.url);return r||(e.url&&(r=(t=e.url).startsWith("http")?dr("try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")):t,fr.set(e.url,r)),e.source&&(r=dr(e.source),fr.set(e.source,r))),Ae(r),r;var t}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>console.error(e),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new lr(r,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new lr(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class mr{constructor(e,r){(0,V.A)(this,"name",void 0),(0,V.A)(this,"workerThread",void 0),(0,V.A)(this,"isRunning",!0),(0,V.A)(this,"result",void 0),(0,V.A)(this,"_resolve",(()=>{})),(0,V.A)(this,"_reject",(()=>{})),this.name=e,this.workerThread=r,this.result=new Promise(((e,r)=>{this._resolve=e,this._reject=r}))}postMessage(e,r){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:r})}done(e){Ae(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Ae(this.isRunning),this.isRunning=!1,this._reject(e)}}class br{static isSupported(){return gr.isSupported()}constructor(e){(0,V.A)(this,"name","unnamed"),(0,V.A)(this,"source",void 0),(0,V.A)(this,"url",void 0),(0,V.A)(this,"maxConcurrency",1),(0,V.A)(this,"maxMobileConcurrency",1),(0,V.A)(this,"onDebug",(()=>{})),(0,V.A)(this,"reuseWorkers",!0),(0,V.A)(this,"props",{}),(0,V.A)(this,"jobQueue",[]),(0,V.A)(this,"idleQueue",[]),(0,V.A)(this,"count",0),(0,V.A)(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,r,t)=>e.done(t),t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,r)=>e.error(r);const n=new Promise((n=>(this.jobQueue.push({name:e,onMessage:r,onError:t,onStart:n}),this)));return this._startQueuedJob(),await n}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:e,backlog:this.jobQueue.length});const t=new mr(r.name,e);e.onMessage=e=>r.onMessage(t,e.type,e.payload),e.onError=e=>r.onError(t,e),r.onStart(t);try{await t.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new gr({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return cr?this.maxMobileConcurrency:this.maxConcurrency}}const vr={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class kr{static isSupported(){return gr.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kr._workerFarm=kr._workerFarm||new kr({}),kr._workerFarm.setProps(e),kr._workerFarm}constructor(e){(0,V.A)(this,"props",void 0),(0,V.A)(this,"workerPools",new Map),this.props={...vr},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:r,source:t,url:n}=e;let o=this.workerPools.get(r);return o||(o=new br({name:r,source:t,url:n}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(0,V.A)(kr,"_workerFarm",void 0);const Ar="latest",xr="3.4.15";async function _r(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=function(e){const r=e.version!==xr?" (worker-utils@".concat(xr,")"):"";return"".concat(e.name,"@").concat(e.version).concat(r)}(e),s=kr.getWorkerFarm(t),{source:i}=t,a={name:o,source:i};i||(a.url=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=r[e.id]||{},n="".concat(e.id,"-worker.js");let o=t.workerUrl;if(o||"compression"!==e.id||(o=r.workerUrl),"test"===r._workerType&&(o="modules/".concat(e.module,"/dist/").concat(n)),!o){let r=e.version;"latest"===r&&(r=Ar);const t=r?"@".concat(r):"";o="https://unpkg.com/@loaders.gl/".concat(e.module).concat(t,"/dist/").concat(n)}return Ae(o),o}(e,t));const c=s.getWorkerPool(a),u=t.jobName||e.name,l=await c.startJob(u,Br.bind(null,n)),f=pr(t);return l.postMessage("process",{input:r,options:f}),(await l.result).result}async function Br(e,r,t,n){switch(t){case"done":r.done(n);break;case"error":r.error(new Error(n.error));break;case"process":const{id:o,input:s,options:i}=n;try{if(!e.process)return void r.postMessage("error",{id:o,error:"Worker not set up to process on main thread"});const t=await e.process(s,i);r.postMessage("done",{id:o,result:t})}catch(e){const t=e instanceof Error?e.message:"unknown error";r.postMessage("error",{id:o,error:t})}break;default:console.warn("process-on-worker: unknown message ".concat(t))}}async function Mr(e,r,t){if(function(e,r){return!!De.isSupported()&&!!(O.Bd||null!=r&&r._nodeWorkers)&&e.worker&&(null==r?void 0:r.worker)}(r,t={...K(),...t}))return await _r(r,e,t);if(r.encode)return await r.encode(e,t);if(r.encodeSync)return r.encodeSync(e,t);if(r.encodeText)return(new TextEncoder).encode(await r.encodeText(e,t));if(r.encodeInBatches){const n=Wr(e,r,t),o=[];for await(const e of n)o.push(e);return(0,le.AQ)(...o)}if(!O.Bd&&r.encodeURLtoURL){const n=Pr("input");await N(n,e);const o=Pr("output"),s=await Tr(n,o,r,t);return(await T(s)).arrayBuffer()}throw new Error("Writer could not encode data")}function Sr(e,r,t){if(r.encodeSync)return r.encodeSync(e,t);throw new Error("Writer could not synchronously encode data")}async function Er(e,r,t){if(r.text&&r.encodeText)return await r.encodeText(e,t);if(r.text&&(r.encode||r.encodeInBatches)){const n=await Mr(e,r,t);return(new TextDecoder).decode(n)}throw new Error("Writer could not encode data as text")}function Wr(e,r,t){if(r.encodeInBatches){const n=function(e){return[{table:e,start:0,end:e.length}]}(e);return r.encodeInBatches(n,t)}throw new Error("Writer could not encode data in batches")}async function Tr(e,r,t,n){if(e=a(e),r=a(r),O.Bd||!t.encodeURLtoURL)throw new Error;return await t.encodeURLtoURL(e,r,n)}function Pr(e){return"/tmp/".concat(e)}async function Cr(e,r,t,n){const o=await Mr(e,t,n);return await N(r,o)}function Rr(e,r,t,n){return J(r,Sr(e,t,n))}var jr=t(31726);function Lr(e,r){const t=e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]();return new ReadableStream({type:"bytes",async pull(e){try{const{done:r,value:n}=await t.next();r?e.close():e.enqueue(new Uint8Array(n))}catch(r){e.error(r)}},async cancel(){var e;await(null==t||null===(e=t.return)||void 0===e?void 0:e.call(t))}},{highWaterMark:2**24,...r})}const Or="3.4.15",Fr={name:"Null loader",id:"null",module:"core",version:Or,worker:!0,mimeTypes:["application/x.empty"],extensions:["null"],tests:[()=>!1],options:{null:{}}};function Dr(e,r,t){return r.null.echoParameters?{arrayBuffer:e,options:r,context:t=t&&JSON.parse(JSON.stringify(t))}:null}const Ur={name:"Null loader",id:"null",module:"core",version:Or,mimeTypes:["application/x.empty"],extensions:["null"],parse:async(e,r,t)=>Dr(e,r,t),parseSync:Dr,parseInBatches:async function*(e,r,t){for await(const n of e)yield Dr(n,r,t)},tests:[()=>!1],options:{null:{echoParameters:!1}}},Ir={name:"JSON",id:"json",module:"json",version:"3.4.15",extensions:["json","geojson"],mimeTypes:["application/json"],category:"json",text:!0,parseTextSync:Qr,parse:async e=>Qr((new TextDecoder).decode(e)),options:{}};function Qr(e){return JSON.parse(e)}async function Nr(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{};if(!(e=await e).ok)return e;const o=e.body;if(!o)return e;const s=e.headers.get("content-length")||0,i=s?parseInt(s):0;if(!(i>0))return e;if("undefined"==typeof ReadableStream||!o.getReader)return e;const a=new ReadableStream({async start(e){const s=o.getReader();await Jr(e,s,0,i,r,t,n)}});return new Response(a)}async function Jr(e,r,t,n,o,s,i){try{const{done:a,value:c}=await r.read();if(a)return s(),void e.close();t+=c.byteLength,o(Math.round(t/n*100),{loadedBytes:t,totalBytes:n}),e.enqueue(c),await Jr(e,r,t,n,o,s,i)}catch(r){e.error(r),i(r)}}class Vr{constructor(e,r){(0,V.A)(this,"_fetch",void 0),(0,V.A)(this,"files",{}),(0,V.A)(this,"lowerCaseFiles",{}),(0,V.A)(this,"usedFiles",{}),this._fetch=(null==r?void 0:r.fetch)||fetch;for(let r=0;r<e.length;++r){const t=e[r];this.files[t.name]=t,this.lowerCaseFiles[t.name.toLowerCase()]=t,this.usedFiles[t.name]=!1}this.fetch=this.fetch.bind(this)}async fetch(e,r){if(e.includes("://"))return this._fetch(e,r);const t=this.files[e];if(!t)return new Response(e,{status:400,statusText:"NOT FOUND"});const n=new Headers(null==r?void 0:r.headers).get("Range"),o=n&&/bytes=($1)-($2)/.exec(n);if(o){const r=parseInt(o[1]),n=parseInt(o[2]),s=await t.slice(r,n).arrayBuffer(),i=new Response(s);return Object.defineProperty(i,"url",{value:e}),i}const s=new Response(t);return Object.defineProperty(s,"url",{value:e}),s}async readdir(e){const r=[];for(const e in this.files)r.push(e);return r}async stat(e,r){const t=this.files[e];if(!t)throw new Error(e);return{size:t.size}}async unlink(e){delete this.files[e],delete this.lowerCaseFiles[e],this.usedFiles[e]=!0}async open(e,r,t){return this.files[e]}async read(e,r){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.byteLength;const n=e;return{bytesRead:t,buffer:await n.slice(0,0+t).arrayBuffer()}}async close(e){}_getFile(e,r){const t=this.files[e]||this.lowerCaseFiles[e];return t&&r&&(this.usedFiles[e]=!0),t}}function zr(e){try{let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const t=new TextDecoder(void 0,r);for await(const r of e)yield"string"==typeof r?r:t.decode(r,{stream:!0})}()}catch(e){return Promise.reject(e)}}async function*qr(e){const r=new TextEncoder;for await(const t of e)yield"string"==typeof t?r.encode(t):t}async function*$r(e){let r="";for await(const t of e){let e;for(r+=t;(e=r.indexOf("\n"))>=0;){const t=r.slice(0,e+1);r=r.slice(e+1),yield t}}r.length>0&&(yield r)}async function*Hr(e){let r=1;for await(const t of e)yield{counter:r,line:t},r++}}}]);