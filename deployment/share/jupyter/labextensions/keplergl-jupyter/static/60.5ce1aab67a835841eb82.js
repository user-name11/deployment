(self.webpackChunkkeplergl_jupyter=self.webpackChunkkeplergl_jupyter||[]).push([[60,7541],{81027:e=>{e.exports=function(e,r){this.v=e,this.k=r},e.exports.__esModule=!0,e.exports.default=e.exports},92606:e=>{function r(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:r}}))}return r=function(e){this.s=e,this.n=e.next},r.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new r(e)}e.exports=function(e){var t,n,a,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,a=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(a&&null!=(t=e[a]))return new r(t.call(e));n="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},73795:(e,r,t)=>{var n=t(81027);e.exports=function(e){return new n(e,0)},e.exports.__esModule=!0,e.exports.default=e.exports},49227:(e,r,t)=>{var n=t(81027);function a(e){var r,t;function a(r,t){try{var s=e[r](t),u=s.value,i=u instanceof n;Promise.resolve(i?u.v:u).then((function(t){if(i){var n="return"===r?"return":"next";if(!u.k||t.done)return a(n,t);t=e[n](t).value}o(s.done?"return":"normal",t)}),(function(e){a("throw",e)}))}catch(e){o("throw",e)}}function o(e,n){switch(e){case"return":r.resolve({value:n,done:!0});break;case"throw":r.reject(n);break;default:r.resolve({value:n,done:!1})}(r=r.next)?a(r.key,r.arg):t=null}this._invoke=function(e,n){return new Promise((function(o,s){var u={key:e,arg:n,resolve:o,reject:s,next:null};t?t=t.next=u:(r=t=u,a(e,n))}))},"function"!=typeof e.return&&(this.return=void 0)}a.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},a.prototype.next=function(e){return this._invoke("next",e)},a.prototype.throw=function(e){return this._invoke("throw",e)},a.prototype.return=function(e){return this._invoke("return",e)},e.exports=function(e){return function(){return new a(e.apply(this,arguments))}},e.exports.__esModule=!0,e.exports.default=e.exports},7191:(e,r,t)=>{"use strict";var n=t(95709),a=t(58784);Object.defineProperty(r,"__esModule",{value:!0}),r.processCsvData=T,r.parseRowsByFields=g,r.parseCsvRowsByFieldType=j,r.processRowObject=_,r.processGeojson=S,r.processKeplerglJSON=F,r.processKeplerglDataset=E,r.processArrowTable=P,r.processArrowBatches=D,r.Processors=r.DATASET_HANDLERS=r.PARSE_FIELD_VALUE_FROM_STRING=r.CSV_NULLS=void 0;var o,s,u=n(t(21259)),i=n(t(26396)),c=a(t(27112)),l=t(62085),f=t(53214),p=n(t(8186)),d=t(13848),v=t(77244),h=t(50094);function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){(0,i.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var A=/^(null|NULL|Null|NaN|\/N||)$/;function b(e){try{return JSON.parse(e)}catch(e){return null}}r.CSV_NULLS=A;var w=(o={},(0,i.default)(o,d.ALL_FIELD_TYPES.boolean,{valid:function(e){return"boolean"==typeof e},parse:function(e){return"true"===e||"True"===e||"TRUE"===e||"1"===e}}),(0,i.default)(o,d.ALL_FIELD_TYPES.integer,{valid:function(e){return parseInt(e,10)===e},parse:function(e){return parseInt(e,10)}}),(0,i.default)(o,d.ALL_FIELD_TYPES.timestamp,{valid:function(e,r){return["x","X"].includes(r.format)?"number"==typeof e:"string"==typeof e},parse:function(e,r){return["x","X"].includes(r.format)?Number(e):e}}),(0,i.default)(o,d.ALL_FIELD_TYPES.real,{valid:function(e){return parseFloat(e)===e},parse:parseFloat}),(0,i.default)(o,d.ALL_FIELD_TYPES.object,{valid:v.isPlainObject,parse:b}),(0,i.default)(o,d.ALL_FIELD_TYPES.array,{valid:Array.isArray,parse:b}),o);function T(e,r){var t,n;if("string"==typeof e){var a=(0,l.csvParseRows)(e);if(!Array.isArray(a)||a.length<2)throw new Error("process Csv Data Failed: CSV is empty");n=a[0],t=a.slice(1)}else Array.isArray(e)&&e.length&&(t=e,n=r,Array.isArray(n)||(n=e[0],t=e.slice(1)));if(!t||!n)throw new Error("invalid input passed to processCsvData");O(t);var o=(0,v.getSampleForTypeAnalyze)({fields:n,rows:t}),s=(0,v.getFieldsFromData)(o,n);return{fields:s,rows:g(t,s)}}function g(e,r){var t=r.findIndex((function(e){return"_geojson"===e.name}));return r.forEach(j.bind(null,e,t)),e}function O(e){for(var r=new RegExp(A,"g"),t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++)"string"==typeof e[t][n]&&e[t][n].match(r)&&(e[t][n]=null)}function j(e,r,t,n){var a=w[t.type];if(a){var o=e.find((function(e){return(0,v.notNullorUndefined)(e[n])}));if(!o||a.valid(o[n],t))return;e.forEach((function(e){null!==e[n]&&(e[n]=a.parse(e[n],t),r>-1&&(0,v.isPlainObject)(e[r])&&(0,v.hasOwnProperty)(e[r],"properties")&&(e[r].properties[t.name]=e[n]))}))}}function _(e){if(!Array.isArray(e))return null;if(!e.length)return{fields:[],rows:[]};var r=Object.keys(e[0]),t=e.map((function(e){return r.map((function(r){return e[r]}))}));return O(t),T(t,r)}function S(e){var r=(0,p.default)(e);if(!r||!Array.isArray(r.features))throw new Error("Read File Failed: File is not a valid GeoJSON. Read more about [supported file format](".concat(d.GUIDES_FILE_FORMAT_DOC,")"));for(var t=[],n=0;n<r.features.length;n++){var a=r.features[n];a.geometry&&t.push(m({_geojson:a},a.properties||{}))}var o=t.reduce((function(e,r){return Object.keys(r).forEach((function(r){e.includes(r)||e.push(r)})),e}),[]);return t.forEach((function(e){o.forEach((function(r){r in e||(e[r]=null,e._geojson.properties&&(e._geojson.properties[r]=null))}))})),_(t)}function F(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.KeplerGlSchema;return e?r.load(e.datasets,e.config):null}function E(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.KeplerGlSchema;if(!e)return null;var t=r.parseSavedData((0,v.toArray)(e));return t?Array.isArray(e)?t:t[0]:null}function P(e){return D(e.data.batches)}function D(e){if(0===e.length)return null;var r=new c.Table(e),t=[];r.schema.fields.forEach((function(e,r){var n,a=null===(n=e.metadata.get("ARROW:extension:name"))||void 0===n?void 0:n.startsWith("geoarrow");t.push({name:e.name,id:e.name,displayName:e.name,format:"",fieldIdx:r,type:a?d.ALL_FIELD_TYPES.geoarrow:(0,v.arrowDataTypeToFieldType)(e.type),analyzerType:a?f.DATA_TYPES.GEOMETRY:(0,v.arrowDataTypeToAnalyzerDataType)(e.type),valueAccessor:function(e){return function(t){return e.valueAt(t.index,r)}},metadata:e.metadata})}));var n=(0,u.default)(Array(r.numCols).keys()).map((function(e){return r.getChildAt(e)}));return{fields:t,rows:[],cols:n,metadata:r.schema.metadata}}r.PARSE_FIELD_VALUE_FROM_STRING=w;var x=(s={},(0,i.default)(s,d.DATASET_FORMATS.row,_),(0,i.default)(s,d.DATASET_FORMATS.geojson,S),(0,i.default)(s,d.DATASET_FORMATS.csv,T),(0,i.default)(s,d.DATASET_FORMATS.arrow,P),(0,i.default)(s,d.DATASET_FORMATS.keplergl,E),s);r.DATASET_HANDLERS=x;var R={processGeojson:S,processCsvData:T,processArrowTable:P,processArrowBatches:D,processRowObject:_,processKeplerglJSON:F,processKeplerglDataset:E,analyzerTypeToFieldType:v.analyzerTypeToFieldType,getFieldsFromData:v.getFieldsFromData,parseCsvRowsByFieldType:j};r.Processors=R},23281:(e,r,t)=>{"use strict";var n=t(58784),a=t(95709);Object.defineProperty(r,"__esModule",{value:!0}),r.isArrowTable=S,r.isArrowData=F,r.isGeoJson=E,r.isFeature=P,r.isFeatureCollection=D,r.isRowObject=x,r.isKeplerGlMap=R,r.makeProgressIterator=k,r.readBatch=C,r.readFileInBatches=function(e){return M.apply(this,arguments)},r.processFileData=function(e){var r=e.content,t=e.fileCache;return new Promise((function(e,n){var a,o,u=r.fileName,i=r.data,c=(0,A.generateHashIdFromString)(u);if(F(i)?(a=b.DATASET_FORMATS.arrow,o=m.processArrowBatches):R(i)?(a=b.DATASET_FORMATS.keplergl,o=m.processKeplerglJSON):x(i)?(a=b.DATASET_FORMATS.row,o=m.processRowObject):E(i)&&(a=b.DATASET_FORMATS.geojson,o=m.processGeojson),a&&o){var l=o(i);e([].concat((0,s.default)(t),[{data:l,info:{id:c,label:r.fileName,format:a}}]))}n("Unknown File Format")}))},r.filesToDataPayload=function(e){var r=e.reduce((function(e,r){var t=r.data,n=r.info;if((null==n?void 0:n.format)===b.DATASET_FORMATS.keplergl)e.keplerMaps.push(T(T({},t),{},{options:{centerMap:!(t.config&&t.config.mapState)}}));else if(b.DATASET_FORMATS[null==n?void 0:n.format]){var a={data:t,info:T({id:(null==n?void 0:n.id)||(0,A.generateHashId)(4)},n||{})};e.datasets.push(a)}return e}),{datasets:[],keplerMaps:[]});return r.keplerMaps.concat({datasets:r.datasets})};var o=a(t(92207)),s=a(t(21259)),u=a(t(79092)),i=a(t(26396)),c=a(t(73795)),l=a(t(49227)),f=a(t(92606)),p=n(t(27112)),d=t(70108),v=t(66764),h=t(49236),y=t(82062),m=t(7191),A=t(77244),b=t(13848);function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function T(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach((function(r){(0,i.default)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var g={METADATA:"metadata",PARTIAL_RESULT:"partial-result",FINAL_RESULT:"final-result"},O={shape:"object-row-table",dynamicTyping:!1},j={shape:"arrow-table",batchDebounceMs:10},_={shape:"object-row-table",jsonpaths:["$","$.features","$.datasets"]};function S(e){return Boolean(e instanceof p.Table)}function F(e){return Array.isArray(e)&&Boolean(e[0].data&&e[0].schema)}function E(e){return(0,A.isPlainObject)(e)&&(P(e)||D(e))}function P(e){return(0,A.isPlainObject)(e)&&"Feature"===e.type&&Boolean(e.geometry)}function D(e){return(0,A.isPlainObject)(e)&&"FeatureCollection"===e.type&&Boolean(e.features)}function x(e){return Array.isArray(e)&&(0,A.isPlainObject)(e[0])}function R(e){return Boolean((0,A.isPlainObject)(e)&&e.datasets&&e.config&&e.info&&(0,A.isPlainObject)(e.info)&&"kepler.gl"===e.info.app)}function k(e,r){return L.apply(this,arguments)}function L(){return(L=(0,l.default)(o.default.mark((function e(r,t){var n,a,s,u,i,l,p,d,v,h,y;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,a=!0,s=!1,e.prev=3,i=(0,f.default)(r);case 5:return e.next=7,(0,c.default)(i.next());case 7:return l=e.sent,a=l.done,e.next=11,(0,c.default)(l.value);case 11:if(p=e.sent,a){e.next=23;break}return v=(d=p).data&&(d.data.length||d.length)||0,n+=v,h=Number.isFinite(d.bytesUsed)?d.bytesUsed/t.size:null,y=T({rowCount:n,rowCountInBatch:v},Number.isFinite(h)?{percent:h}:{}),e.next=20,T(T({},d),{},{progress:y});case 20:a=!0,e.next=5;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(3),s=!0,u=e.t0;case 29:if(e.prev=29,e.prev=30,a||null==i.return){e.next=34;break}return e.next=34,(0,c.default)(i.return());case 34:if(e.prev=34,!s){e.next=37;break}throw u;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[3,25,29,39],[30,,34,38]])})))).apply(this,arguments)}function C(e,r){return N.apply(this,arguments)}function N(){return(N=(0,l.default)(o.default.mark((function e(r,t){var n,a,s,u,i,l,p,d,h,y,m;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,a=[],s=!0,u=!1,e.prev=4,l=(0,f.default)(r);case 6:return e.next=8,(0,c.default)(l.next());case 8:return p=e.sent,s=p.done,e.next=12,(0,c.default)(p.value);case 12:if(d=e.sent,s){e.next=21;break}if((h=d).batchType===g.FINAL_RESULT)h.container&&(n=T({},h.container)),h.jsonpath&&h.jsonpath.length>1?new v._JSONPath(h.jsonpath).setFieldAtPath(n,a):h.jsonpath&&1===h.jsonpath.length&&(n=a);else for(y=S(h.data)?h.data.batches:h.data,m=0;m<(null==y?void 0:y.length);m++)a.push(y[m]);return e.next=18,T(T(T({},h),h.schema?{headers:Object.keys(h.schema)}:{}),{},{fileName:t,data:n||a});case 18:s=!0,e.next=6;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(4),u=!0,i=e.t0;case 27:if(e.prev=27,e.prev=28,s||null==l.return){e.next=32;break}return e.next=32,(0,c.default)(l.return());case 32:if(e.prev=32,!u){e.next=35;break}throw i;case 35:return e.finish(32);case 36:return e.finish(27);case 37:case"end":return e.stop()}}),e,null,[[4,23,27,37],[28,,32,36]])})))).apply(this,arguments)}function M(){return(M=(0,u.default)(o.default.mark((function e(r){var t,n,a,u,i,c,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.file,n=r.loaders,a=void 0===n?[]:n,u=r.loadOptions,i=void 0===u?{}:u,a=[v.JSONLoader,h.CSVLoader,y.ArrowLoader].concat((0,s.default)(a)),i=T({csv:O,arrow:j,json:_,metadata:!0},i),e.next=5,(0,d.parseInBatches)(t,a,i);case 5:return c=e.sent,l=k(c,{size:t.size}),e.abrupt("return",C(l,t.name));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},60:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(7191);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=t(23281);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=t(23673);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}}))}))},23673:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},7541:(e,r,t)=>{"use strict";t.d(r,{Un:()=>u,e2:()=>s,fy:()=>o,hG:()=>i,oz:()=>c,sw:()=>a,zB:()=>l});var n=(0,t(28996).A)(","),a=n.parse,o=n.parseRows,s=n.format,u=n.formatBody,i=n.formatRows,c=n.formatRow,l=n.formatValue},28996:(e,r,t)=>{"use strict";t.d(r,{A:()=>f});var n={},a={},o=34,s=10,u=13;function i(e){return new Function("d","return {"+e.map((function(e,r){return JSON.stringify(e)+": d["+r+'] || ""'})).join(",")+"}")}function c(e){var r=Object.create(null),t=[];return e.forEach((function(e){for(var n in e)n in r||t.push(r[n]=n)})),t}function l(e,r){var t=e+"",n=t.length;return n<r?new Array(r-n+1).join(0)+t:t}function f(e){var r=new RegExp('["'+e+"\n\r]"),t=e.charCodeAt(0);function f(e,r){var i,c=[],l=e.length,f=0,p=0,d=l<=0,v=!1;function h(){if(d)return a;if(v)return v=!1,n;var r,i,c=f;if(e.charCodeAt(c)===o){for(;f++<l&&e.charCodeAt(f)!==o||e.charCodeAt(++f)===o;);return(r=f)>=l?d=!0:(i=e.charCodeAt(f++))===s?v=!0:i===u&&(v=!0,e.charCodeAt(f)===s&&++f),e.slice(c+1,r-1).replace(/""/g,'"')}for(;f<l;){if((i=e.charCodeAt(r=f++))===s)v=!0;else if(i===u)v=!0,e.charCodeAt(f)===s&&++f;else if(i!==t)continue;return e.slice(c,r)}return d=!0,e.slice(c,l)}for(e.charCodeAt(l-1)===s&&--l,e.charCodeAt(l-1)===u&&--l;(i=h())!==a;){for(var y=[];i!==n&&i!==a;)y.push(i),i=h();r&&null==(y=r(y,p++))||c.push(y)}return c}function p(r,t){return r.map((function(r){return t.map((function(e){return v(r[e])})).join(e)}))}function d(r){return r.map(v).join(e)}function v(e){return null==e?"":e instanceof Date?(a=(t=e).getUTCHours(),o=t.getUTCMinutes(),s=t.getUTCSeconds(),u=t.getUTCMilliseconds(),isNaN(t)?"Invalid Date":((n=t.getUTCFullYear())<0?"-"+l(-n,6):n>9999?"+"+l(n,6):l(n,4))+"-"+l(t.getUTCMonth()+1,2)+"-"+l(t.getUTCDate(),2)+(u?"T"+l(a,2)+":"+l(o,2)+":"+l(s,2)+"."+l(u,3)+"Z":s?"T"+l(a,2)+":"+l(o,2)+":"+l(s,2)+"Z":o||a?"T"+l(a,2)+":"+l(o,2)+"Z":"")):r.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e;var t,n,a,o,s,u}return{parse:function(e,r){var t,n,a=f(e,(function(e,a){if(t)return t(e,a-1);n=e,t=r?function(e,r){var t=i(e);return function(n,a){return r(t(n),a,e)}}(e,r):i(e)}));return a.columns=n||[],a},parseRows:f,format:function(r,t){return null==t&&(t=c(r)),[t.map(v).join(e)].concat(p(r,t)).join("\n")},formatBody:function(e,r){return null==r&&(r=c(e)),p(e,r).join("\n")},formatRows:function(e){return e.map(d).join("\n")},formatRow:d,formatValue:v}}},62085:(e,r,t)=>{"use strict";t.r(r),t.d(r,{autoType:()=>d,csvFormat:()=>a.e2,csvFormatBody:()=>a.Un,csvFormatRow:()=>a.oz,csvFormatRows:()=>a.hG,csvFormatValue:()=>a.zB,csvParse:()=>a.sw,csvParseRows:()=>a.fy,dsvFormat:()=>n.A,tsvFormat:()=>i,tsvFormatBody:()=>c,tsvFormatRow:()=>f,tsvFormatRows:()=>l,tsvFormatValue:()=>p,tsvParse:()=>s,tsvParseRows:()=>u});var n=t(28996),a=t(7541),o=(0,n.A)("\t"),s=o.parse,u=o.parseRows,i=o.format,c=o.formatBody,l=o.formatRows,f=o.formatRow,p=o.formatValue;function d(e){for(var r in e){var t,n,a=e[r].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(t=+a)){if(!(n=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;v&&n[4]&&!n[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=t;else a=null;e[r]=a}return e}const v=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours()}}]);