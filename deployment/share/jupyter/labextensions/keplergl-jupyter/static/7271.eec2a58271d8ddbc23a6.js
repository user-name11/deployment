(self.webpackChunkkeplergl_jupyter=self.webpackChunkkeplergl_jupyter||[]).push([[7271],{41972:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},18337:e=>{function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},56994:(e,t,r)=>{var n=r(67197);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},65611:(e,t,r)=>{var n=r(85735).default,a=r(41972);e.exports=function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},67197:e=>{function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},59603:(e,t,r)=>{"use strict";var n=r(95709);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.datasetSchema=t.DatasetSchema=t.propertiesV1=t.propertiesV0=t.FieldSchema=t.fieldPropertiesV1=t.fieldPropertiesV0=void 0;var a,l=n(r(41972)),o=n(r(26396)),i=n(r(82274)),u=n(r(65044)),s=n(r(56994)),c=n(r(65611)),f=n(r(18337)),d=n(r(91863)),p=r(89840),v=r(9138),y=n(r(51940)),h=r(77244);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var g={name:null,type:null};t.fieldPropertiesV0=g;var b={name:null,type:null,format:null,analyzerType:null,metadata:null};t.fieldPropertiesV1=b;var k=function(e){(0,s.default)(r,e);var t=m(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"save",value:function(e){var t=this;return(0,o.default)({},this.key,e.map((function(e){return t.savePropertiesOrApplySchema(e)[t.key]})))}},{key:"load",value:function(e){return(0,o.default)({},this.key,e)}}]),r}(y.default);t.FieldSchema=k;var V={id:null,label:null,color:null,allData:null,fields:new k({key:"fields",version:v.VERSIONS.v0,properties:g})};t.propertiesV0=V;var P=O(O({},V),{},{fields:new k({key:"fields",version:v.VERSIONS.v1,properties:b})});t.propertiesV1=P;var j=function(e){(0,s.default)(r,e);var t=m(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return e=t.call.apply(t,[this].concat(a)),(0,o.default)((0,l.default)(e),"key","dataset"),e}return(0,u.default)(r,[{key:"save",value:function(e){var t=e.dataContainer?O(O({},e),{},{allData:e.dataContainer.flattenData()}):e;return this.savePropertiesOrApplySchema(t)[this.key]}},{key:"load",value:function(e){var t=e.fields,r=e.allData,n=t;if(t[0]&&(!t[0].hasOwnProperty("format")||!t[0].hasOwnProperty("analyzerType"))){var a=t.map((function(e){return e.name})),l=(0,h.getSampleForTypeAnalyze)({fields:a,rows:r}),o=(0,h.getFieldsFromData)(l,a);(n=o.map((function(e,t){return O(O({},(0,d.default)(o[t],["name","type","format"])),{},{analyzerType:o[t].analyzerType})}))).forEach((function(e,r){t[r].type!==e.type&&p.console.warn("detect ".concat(e.name," type is now ").concat(e.type," instead of ").concat(t[r].type))}))}return{data:{fields:n,rows:e.allData},info:(0,d.default)(e,["id","label","color"])}}}]),r}(y.default);t.DatasetSchema=j;var w=(a={},(0,o.default)(a,v.VERSIONS.v0,new j({key:"dataset",version:v.VERSIONS.v0,properties:V})),(0,o.default)(a,v.VERSIONS.v1,new j({key:"dataset",version:v.VERSIONS.v1,properties:P})),a);t.datasetSchema=w;var R=w;t.default=R},77271:(e,t,r)=>{"use strict";var n=r(95709),a=r(58784);Object.defineProperty(t,"__esModule",{value:!0});var l={KeplerGlSchema:!0,reducerSchema:!0,KeplerGLSchemaClass:!0,CURRENT_VERSION:!0,VERSIONS:!0,visStateSchemaV1:!0,FilterSchemaV0:!0,LayerSchemaV0:!0,InteractionSchemaV1:!0,DimensionFieldSchema:!0,SplitMapsSchema:!0,filterPropsV1:!0,visStateSchema:!0,layerPropsV1:!0,layerPropsV0:!0,effectPropsV1:!0,datasetSchema:!0,DatasetSchema:!0,fieldPropertiesV1:!0,datasetPropertiesV1:!0,mapStyleSchema:!0,MapStyleSchemaV1:!0,CustomMapStyleSchema:!0,mapStateSchema:!0,Schema:!0};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"KeplerGlSchema",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"reducerSchema",{enumerable:!0,get:function(){return o.reducerSchema}}),Object.defineProperty(t,"KeplerGLSchemaClass",{enumerable:!0,get:function(){return o.KeplerGLSchema}}),Object.defineProperty(t,"CURRENT_VERSION",{enumerable:!0,get:function(){return i.CURRENT_VERSION}}),Object.defineProperty(t,"VERSIONS",{enumerable:!0,get:function(){return i.VERSIONS}}),Object.defineProperty(t,"visStateSchemaV1",{enumerable:!0,get:function(){return u.visStateSchemaV1}}),Object.defineProperty(t,"FilterSchemaV0",{enumerable:!0,get:function(){return u.FilterSchemaV0}}),Object.defineProperty(t,"LayerSchemaV0",{enumerable:!0,get:function(){return u.LayerSchemaV0}}),Object.defineProperty(t,"InteractionSchemaV1",{enumerable:!0,get:function(){return u.InteractionSchemaV1}}),Object.defineProperty(t,"DimensionFieldSchema",{enumerable:!0,get:function(){return u.DimensionFieldSchema}}),Object.defineProperty(t,"SplitMapsSchema",{enumerable:!0,get:function(){return u.SplitMapsSchema}}),Object.defineProperty(t,"filterPropsV1",{enumerable:!0,get:function(){return u.filterPropsV1}}),Object.defineProperty(t,"visStateSchema",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"layerPropsV1",{enumerable:!0,get:function(){return u.layerPropsV1}}),Object.defineProperty(t,"layerPropsV0",{enumerable:!0,get:function(){return u.layerPropsV0}}),Object.defineProperty(t,"effectPropsV1",{enumerable:!0,get:function(){return u.effectPropsV1}}),Object.defineProperty(t,"datasetSchema",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"DatasetSchema",{enumerable:!0,get:function(){return s.DatasetSchema}}),Object.defineProperty(t,"fieldPropertiesV1",{enumerable:!0,get:function(){return s.fieldPropertiesV1}}),Object.defineProperty(t,"datasetPropertiesV1",{enumerable:!0,get:function(){return s.propertiesV1}}),Object.defineProperty(t,"mapStyleSchema",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"MapStyleSchemaV1",{enumerable:!0,get:function(){return c.MapStyleSchemaV1}}),Object.defineProperty(t,"CustomMapStyleSchema",{enumerable:!0,get:function(){return c.CustomMapStyleSchema}}),Object.defineProperty(t,"mapStateSchema",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"Schema",{enumerable:!0,get:function(){return d.default}});var o=a(r(9398)),i=r(9138),u=a(r(91850));Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(l,e)||e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var s=a(r(59603)),c=a(r(8029)),f=n(r(20013)),d=n(r(51940))},20013:(e,t,r)=>{"use strict";var n=r(95709);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.propertiesV1=t.propertiesV0=void 0;var a,l=n(r(26396)),o=r(9138),i=n(r(51940));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c={bearing:null,dragRotate:null,latitude:null,longitude:null,pitch:null,zoom:null};t.propertiesV0=c;var f=s(s({},c),{},{isSplit:null,isViewportSynced:null,isZoomLocked:null,splitMapViewports:null});t.propertiesV1=f;var d=(a={},(0,l.default)(a,o.VERSIONS.v0,new i.default({version:o.VERSIONS.v0,properties:c,key:"mapState"})),(0,l.default)(a,o.VERSIONS.v1,new i.default({version:o.VERSIONS.v1,properties:f,key:"mapState"})),a);t.default=d},8029:(e,t,r)=>{"use strict";var n=r(95709);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.propertiesV1=t.propertiesV0=t.MapStyleSchemaV1=t.CustomMapStyleSchema=t.customMapStylePropsV1=void 0;var a,l=n(r(85735)),o=n(r(82274)),i=n(r(65044)),u=n(r(41972)),s=n(r(56994)),c=n(r(65611)),f=n(r(18337)),d=n(r(26396)),p=r(9138),v=n(r(51940));function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S={accessToken:null,custom:null,icon:null,id:null,label:null,url:null};t.customMapStylePropsV1=S;var O=new v.default({version:p.VERSIONS.v1,key:"customStyle",properties:S});t.CustomMapStyleSchema=O;var m=function(e){(0,s.default)(a,e);var t,r,n=(t=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(t);if(r){var a=(0,f.default)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return(0,c.default)(this,e)});function a(){var e;(0,o.default)(this,a);for(var t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return e=n.call.apply(n,[this].concat(r)),(0,d.default)((0,u.default)(e),"version",p.VERSIONS.v1),(0,d.default)((0,u.default)(e),"key","mapStyles"),e}return(0,i.default)(a,[{key:"save",value:function(e){var t=Object.keys(e).reduce((function(t,r){return h(h({},t),e[r].custom?(0,d.default)({},r,O.save(e[r]).customStyle):{})}),{});return(0,d.default)({},this.key,t)}},{key:"load",value:function(e){return"object"===(0,l.default)(e)&&Object.keys(e).length?(0,d.default)({},this.key,e):{}}}]),a}(v.default);t.MapStyleSchemaV1=m;var g={styleType:null,topLayerGroups:null,visibleLayerGroups:null,buildingLayer:null,mapStyles:new m};t.propertiesV0=g;var b={styleType:null,topLayerGroups:null,visibleLayerGroups:null,threeDBuildingColor:null,backgroundColor:null,mapStyles:new m};t.propertiesV1=b;var k=(a={},(0,d.default)(a,p.VERSIONS.v0,new v.default({version:p.VERSIONS.v0,properties:g,key:"mapStyle"})),(0,d.default)(a,p.VERSIONS.v1,new v.default({version:p.VERSIONS.v1,properties:b,key:"mapStyle"})),a);t.default=k},9398:(e,t,r)=>{"use strict";var n=r(95709);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.KeplerGLSchema=t.reducerSchema=void 0;var a=n(r(82274)),l=n(r(65044)),o=n(r(26396)),i=r(89840),u=n(r(59603)),s=n(r(8029)),c=n(r(20013)),f=r(91850),d=r(9138),p=r(77244);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={visState:f.visStateSchema,mapState:c.default,mapStyle:s.default};t.reducerSchema=h;var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.reducers,n=void 0===r?h:r,l=t.datasets,i=void 0===l?u.default:l,s=t.validVersions,c=void 0===s?d.VERSIONS:s,f=t.version,p=void 0===f?d.CURRENT_VERSION:f;(0,a.default)(this,e),(0,o.default)(this,"_validVersions",void 0),(0,o.default)(this,"_version",void 0),(0,o.default)(this,"_reducerSchemas",void 0),(0,o.default)(this,"_datasetSchema",void 0),(0,o.default)(this,"_datasetLastSaved",void 0),(0,o.default)(this,"_savedDataset",void 0),this._validVersions=c,this._version=p,this._reducerSchemas=n,this._datasetSchema=i,this._datasetLastSaved=null,this._savedDataset=null}return(0,l.default)(e,[{key:"save",value:function(e){return{datasets:this.getDatasetToSave(e),config:this.getConfigToSave(e),info:y({app:"kepler.gl",created_at:(new Date).toString()},this.getMapInfo(e))}}},{key:"getMapInfo",value:function(e){return e.visState.mapInfo}},{key:"load",value:function(e,t){return 1===arguments.length&&(0,p.isPlainObject)(arguments[0])&&(Array.isArray(arguments[0].datasets)||(0,p.isPlainObject)(arguments[0].config))?this.load(arguments[0].datasets,arguments[0].config):y(y({},Array.isArray(e)?{datasets:this.parseSavedData(e)}:{}),t?{config:this.parseSavedConfig(t)}:{})}},{key:"getDatasetToSave",value:function(e){var t=this;if(!this.hasDataChanged(e))return this._savedDataset;var r=e.visState,n=Object.values(r.datasets).map((function(e){return{version:t._version,data:t._datasetSchema[t._version].save(e)}}));return this._datasetLastSaved=r.datasets,this._savedDataset=n,n}},{key:"getConfigToSave",value:function(e){var t=this,r=Object.keys(this._reducerSchemas).reduce((function(r,n){return y(y({},r),e[n]?t._reducerSchemas[n][t._version].save(e[n]):{})}),{});return{version:this._version,config:r}}},{key:"parseSavedData",value:function(e){var t=this;return e.reduce((function(e,r){var n=t.validateVersion(r.version);return n?(e.push(t._datasetSchema[n].load(r.data)),e):e}),[])}},{key:"parseSavedConfig",value:function(e){var t=this,r=e.version,n=e.config,a=this.validateVersion(r);return a?Object.keys(n).reduce((function(e,r){return y(y({},e),r in t._reducerSchemas?t._reducerSchemas[r][a].load(n[r]):{})}),{}):null}},{key:"validateVersion",value:function(e){return e?this._validVersions[e]?e:(i.console.error("".concat(e," is not a valid version")),null):(i.console.error("There is no version number associated with this saved map"),null)}},{key:"hasDataChanged",value:function(e){return!0}}]),e}();t.KeplerGLSchema=S;var O=new S;t.default=O},51940:(e,t,r)=>{"use strict";var n=r(95709);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(21259)),l=n(r(82274)),o=n(r(65044)),i=n(r(26396)),u=r(89840),s=r(9138);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.version,n=void 0===r?s.CURRENT_VERSION:r,a=t.key,o=void 0===a?"":a,u=t.properties,c=void 0===u?null:u;(0,l.default)(this,e),(0,i.default)(this,"version",void 0),(0,i.default)(this,"key",void 0),(0,i.default)(this,"properties",void 0),this.version=n,this.properties=c,this.key=o}return(0,o.default)(e,[{key:"loadPropertiesOrApplySchema",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return this._getPropertyValueFromSchema("load",e,t,r)}},{key:"savePropertiesOrApplySchema",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return this._getPropertyValueFromSchema("save",e,t,r)}},{key:"_getPropertyValueFromSchema",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l="_".concat(e);return(0,i.default)({},this.key,this.properties?Object.keys(this.properties).reduce((function(o,u){return f(f({},o),u in t?r.properties[u]?r.properties[u][e]?r.properties[u][l](t[u],[].concat((0,a.default)(n),[t]),o):{}:(0,i.default)({},u,t[u]):{})}),{}):t)}},{key:"_isCurrentVersion",value:function(){return this.version===s.CURRENT_VERSION}},{key:"outdatedVersionError",value:function(){this._isCurrentVersion()||u.console.error("".concat(this.key," ").concat(this.version," is outdated. save should not be called anymore"))}},{key:"_save",value:function(){return this.outdatedVersionError(),this.save.apply(this,arguments)}},{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.savePropertiesOrApplySchema(e,t,r)}},{key:"_load",value:function(){return this.load.apply(this,arguments)}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.loadPropertiesOrApplySchema(e,t,r)}}]),e}();t.default=d},9138:(e,t,r)=>{"use strict";var n=r(95709);Object.defineProperty(t,"__esModule",{value:!0}),t.CURRENT_VERSION=t.VERSIONS=void 0;var a=(0,n(r(25499)).default)({v0:null,v1:null});t.VERSIONS=a;var l=a.v1;t.CURRENT_VERSION=l},91850:(e,t,r)=>{"use strict";var n=r(95709);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.visStateSchema=t.visStateSchemaV1=t.visStateSchemaV0=t.VisStateSchemaV1=t.propertiesV1=t.propertiesV0=t.filterPropsV1=t.EffectsSchema=t.effectPropsV1=t.SplitMapsSchema=t.DimensionFieldSchema=t.filterPropsV0=t.InteractionSchemaV1=t.FilterSchemaV0=t.LayerSchemaV0=t.layerPropsV1=t.layerPropsV0=t.dimensionPropsV0=void 0;var a,l=n(r(85735)),o=n(r(39892)),i=n(r(22056)),u=n(r(82274)),s=n(r(65044)),c=n(r(41972)),f=n(r(56994)),d=n(r(65611)),p=n(r(18337)),v=n(r(26396)),y=n(r(91863)),h=r(9138),S=r(13848),O=r(77244),m=n(r(51940)),g=n(r(67193));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,v.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var P=["name","type"];t.dimensionPropsV0=P;var j=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"version",h.VERSIONS.v0),e}return(0,s.default)(r,[{key:"save",value:function(e){return(0,v.default)({},this.key,null!==e?this.savePropertiesOrApplySchema(e)[this.key]:null)}},{key:"load",value:function(e,t,r){var n=t.slice(-1),a=(0,i.default)(n,1)[0],l=this.key;return"geojson"===a.type&&"sizeField"===this.key&&e&&(l=function(e){var t=[0,50];return e.visConfig.extruded?"heightField":e.visConfig.stroked?"sizeField":10!==e.visConfig.radius||e.visConfig.radiusRange.some((function(e,r){return e!==t[r]}))?"radiusField":"sizeField"}(a)),{visualChannels:k(k({},r.visualChannels||{}),{},(0,v.default)({},l,e))}}}]),r}(m.default),w=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"version",h.VERSIONS.v0),e}return(0,s.default)(r,[{key:"save",value:function(e){return(0,v.default)({},this.key,e)}},{key:"load",value:function(e,t,r){var n=t.slice(-1),a=(0,i.default)(n,1)[0];return"sizeScale"===this.key&&"geojson"===a.type?{}:{visualChannels:k(k({},r.visualChannels||{}),{},(0,v.default)({},this.key,e))}}}]),r}(m.default),R=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"version",h.VERSIONS.v0),e}return(0,s.default)(r,[{key:"load",value:function(e,t,r){return{config:k(k({},r.config||{}),{},(0,v.default)({},this.key,e))}}}]),r}(m.default),E=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"version",h.VERSIONS.v0),e}return(0,s.default)(r,[{key:"load",value:function(e,t,r){return{config:k(k({},r.config||{}),{},{columns:Object.keys(e).reduce((function(t,r){return k(k({},t),{},(0,v.default)({},r,e[r].value))}),{})})}}}]),r}(m.default),_=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"version",h.VERSIONS.v0),e}return(0,s.default)(r,[{key:"load",value:function(e,t,r){var n=r.config||{};return{config:k(k({},n),{},{visConfig:k(k({},n.visConfig||{}),{},(0,v.default)({},this.key,e))})}}}]),r}(m.default),I=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"version",h.VERSIONS.v0),(0,v.default)((0,c.default)(e),"key","visConfig"),e}return(0,s.default)(r,[{key:"load",value:function(e,t,r){var n=t.slice(-1),a=(0,i.default)(n,1)[0],l={geojson:{extruded:"enable3d",elevationRange:"heightRange"}};if(a.type in l){var o=l[a.type];return{config:k(k({},r.config||{}),{},{visConfig:Object.keys(e).reduce((function(t,r){return k(k({},t),o[r]?(0,v.default)({},o[r],e[r]):(0,v.default)({},r,e[r]))}),{})})}}return{config:k(k({},r.config||{}),{},{visConfig:e})}}}]),r}(m.default),C=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"version",h.VERSIONS.v0),e}return(0,s.default)(r,[{key:"load",value:function(e){return{}}}]),r}(m.default),N={id:null,type:null,dataId:new R({key:"dataId"}),label:new R({key:"label"}),color:new R({key:"color"}),isVisible:new R({key:"isVisible"}),hidden:new R({key:"hidden"}),visConfig:new I({key:"visConfig"}),columns:new E,colorField:new j({properties:P,key:"colorField"}),colorScale:new w({key:"colorScale"}),sizeField:new j({properties:P,key:"sizeField"}),sizeScale:new w({key:"sizeScale"}),enable3d:new _({key:"enable3d"}),colorAggregation:new _({key:"colorAggregation"}),sizeAggregation:new _({key:"sizeAggregation"}),isAggregated:new C};t.layerPropsV0=N;var A=function(e){(0,f.default)(r,e);var t=V(r);function r(){return(0,u.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"save",value:function(e,t){return(0,v.default)({},this.key,Object.keys(e).reduce((function(t,r){var n;return k(k({},t),null!==(n=e[r])&&void 0!==n&&n.value?(0,v.default)({},r,e[r].value):{})}),{}))}},{key:"load",value:function(e){return{columns:e}}}]),r}(m.default),D=function(e){(0,f.default)(r,e);var t=V(r);function r(){return(0,u.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"save",value:function(e){return(0,v.default)({},this.key,e.map((function(e){return k(k({},e),{},{field:e.field?(0,y.default)(e.field,["name","type"]):null})})))}},{key:"load",value:function(e){return{textLabel:Array.isArray(e)?e:[e]}}}]),r}(m.default),x={geojson:function(e,t,r){var n=t.slice(-1),a=(0,i.default)(n,1)[0],l=!e.hasOwnProperty("strokeColorField"),o=e.radiusField||a.config.visConfig.radius!==S.LAYER_VIS_CONFIGS.radius.defaultValue;return l&&!o&&a.config.visConfig.stroked?{strokeColorField:e.colorField,strokeColorScale:e.colorScale}:{}}},F=function(e){(0,f.default)(r,e);var t=V(r);function r(){return(0,u.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"save",value:function(e,t){var r=t.slice(-1),n=(0,i.default)(r,1)[0];return(0,v.default)({},this.key,Object.keys(e).reduce((function(t,r){var a;return k(k({},t),{},(a={},(0,v.default)(a,e[r].field,n.config[e[r].field]?(0,y.default)(n.config[e[r].field],["name","type"]):null),(0,v.default)(a,e[r].scale,n.config[e[r].scale]),a))}),{}))}},{key:"load",value:function(e,t,r){var n=t.slice(-1),a=(0,i.default)(n,1)[0],l=x[a.type]?x[a.type](e,t,r):{};return k(k({},r),{},{config:k(k(k({},r.config||{}),e),l)})}}]),r}(m.default),M={point:function(e,t,r){var n={},a=t.slice(-2,-1),l=(0,i.default)(a,1)[0];return!e.hasOwnProperty("filled")&&!e.strokeColor&&!e.strokeColorRange&&(n.strokeColor=l.config.color,n.strokeColorRange=(0,g.default)(e.colorRange),e.outline&&(n.filled=!1)),n},geojson:function(e,t,r){var n={},a=t.slice(-2,-1),l=(0,i.default)(a,1)[0],o=l.visualChannels&&!l.visualChannels.hasOwnProperty("strokeColorField")&&!e.strokeColor&&!e.strokeColorRange,u=l.visualChannels&&l.visualChannels.radiusField||e&&e.radius!==S.LAYER_VIS_CONFIGS.radius.defaultValue;return o&&(n.strokeColor=l.config.color,n.strokeColorRange=(0,g.default)(e.colorRange),u&&(n.filled=!0,n.stroked=!1)),n}},T=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"key","visConfig"),e}return(0,s.default)(r,[{key:"load",value:function(e,t,r){var n=t.slice(-2,-1),a=(0,i.default)(n,1)[0],l=M[a.type]?M[a.type](e,t,r):{};return{visConfig:k(k({},e),l)}}}]),r}(m.default),L={id:null,type:null,config:new m.default({version:h.VERSIONS.v1,key:"config",properties:{dataId:null,label:null,color:null,highlightColor:null,columns:new A({version:h.VERSIONS.v1,key:"columns"}),isVisible:null,visConfig:new T({version:h.VERSIONS.v1}),hidden:null,textLabel:new D({version:h.VERSIONS.v1,key:"textLabel"})}}),visualChannels:new F({version:h.VERSIONS.v1,key:"visualChannels"})};t.layerPropsV1=L;var z=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"key","layers"),e}return(0,s.default)(r,[{key:"save",value:function(e,t){var r=this,n=t.slice(-1),a=(0,i.default)(n,1)[0];return(0,v.default)({},this.key,a.layerOrder.reduce((function(t,n){var a=(0,O.findById)(n)(e);return null!=a&&a.isValidToSave()&&t.push(r.savePropertiesOrApplySchema(a).layers),t}),[]))}},{key:"load",value:function(e){var t=this;return(0,v.default)({},this.key,e?e.map((function(r){return t.loadPropertiesOrApplySchema(r,e).layers})):[])}}]),r}(m.default);t.LayerSchemaV0=z;var B=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"key","filters"),e}return(0,s.default)(r,[{key:"save",value:function(e){var t=this;return{filters:e.filter(O.isFilterValidToSave).map((function(e){return t.savePropertiesOrApplySchema(e).filters}))}}},{key:"load",value:function(e){var t=this;return{filters:null==e?void 0:e.map((function(e){return t.loadPropertiesOrApplySchema(e).filters})).map((function(e){var t=e.enlarged,r=e.view;return k(k({},(0,o.default)(e,["enlarged","view"])),{},{view:r||(t?S.FILTER_VIEW_TYPES.enlarged:S.FILTER_VIEW_TYPES.side)})}))}}}]),r}(m.default);t.FilterSchemaV0=B;var G=["tooltip","brush"],U=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"key","interactionConfig"),e}return(0,s.default)(r,[{key:"save",value:function(e){return Array.isArray(this.properties)?(0,v.default)({},this.key,this.properties.reduce((function(t,r){return k(k({},t),e[r].enabled?(0,v.default)({},r,e[r].config):{})}),{})):{}}},{key:"load",value:function(e){return Array.isArray(this.properties)?(0,v.default)({},this.key,this.properties.reduce((function(t,r){return k(k({},t),(0,v.default)({},r,k(k({},e[r]||{}),{},{enabled:Boolean(e[r])})))}),{})):{}}}]),r}(m.default),K=[].concat(G,["geocoder","coordinate"]),Y=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"key","interactionConfig"),e}return(0,s.default)(r,[{key:"save",value:function(e){return Array.isArray(this.properties)?(0,v.default)({},this.key,this.properties.reduce((function(t,r){return k(k({},t),{},(0,v.default)({},r,k(k({},e[r].config),{},{enabled:e[r].enabled})))}),{})):{}}},{key:"load",value:function(e){var t=this,r=e;return Object.keys(e).forEach((function(e){if("tooltip"===e){var n=r[e].fieldsToShow;if(!(0,O.notNullorUndefined)(n))return(0,v.default)({},t.key,r);Object.keys(n).forEach((function(e){n[e]=n[e].map((function(e){return e.name?e:{name:e,format:null}}))}))}})),(0,v.default)({},this.key,r)}}]),r}(m.default);t.InteractionSchemaV1=Y;var W={dataId:null,id:null,name:null,type:null,value:null,enlarged:null};t.filterPropsV0=W;var Z=function(e){(0,f.default)(r,e);var t=V(r);function r(){return(0,u.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"save",value:function(e){return(0,v.default)({},this.key,e?this.savePropertiesOrApplySchema(e)[this.key]:null)}},{key:"load",value:function(e){return(0,v.default)({},this.key,e)}}]),r}(m.default);t.DimensionFieldSchema=Z;var q=function(e){(0,f.default)(r,e);var t=V(r);function r(){return(0,u.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"convertLayerSettings",value:function(e,t){var r=(0,i.default)(t,2),n=r[0],a=r[1];return"boolean"==typeof a?k(k({},e),{},(0,v.default)({},n,a)):a&&"object"===(0,l.default)(a)&&a.isAvailable?k(k({},e),{},(0,v.default)({},n,Boolean(a.isVisible))):e}},{key:"load",value:function(e){var t=this;return Array.isArray(e)&&e.length?{splitMaps:e.map((function(e){return k(k({},e),{},{layers:Object.entries(e.layers||{}).reduce(t.convertLayerSettings,{})})}))}:{splitMaps:[]}}}]),r}(m.default);t.SplitMapsSchema=q;var H={id:null,type:null,isEnabled:null,parameters:null};t.effectPropsV1=H;var J=function(e){(0,f.default)(r,e);var t=V(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,c.default)(e),"key","effects"),e}return(0,s.default)(r,[{key:"save",value:function(e,t){var r=this,n=t.slice(-1),a=(0,i.default)(n,1)[0];return(0,v.default)({},this.key,a.effectOrder.reduce((function(t,n){var a=(0,O.findById)(n)(e);return null!=a&&a.isValidToSave()&&t.push(r.savePropertiesOrApplySchema(a).effects),t}),[]))}},{key:"load",value:function(e){var t=this;return(0,v.default)({},this.key,e.map((function(r){var n=r.config?k(k({id:r.id},r.config),{},{parameters:k({},r.config.params||{})}):r;return t.loadPropertiesOrApplySchema(n,e).effects})))}}]),r}(m.default);t.EffectsSchema=J;var Q=k(k({},W),{},{plotType:null,animationWindow:null,yAxis:new Z({version:h.VERSIONS.v1,key:"yAxis",properties:{name:null,type:null}}),view:null,layerId:null,speed:null,enabled:null});t.filterPropsV1=Q;var X={filters:new B({version:h.VERSIONS.v0,properties:W}),layers:new z({version:h.VERSIONS.v0,properties:N}),interactionConfig:new U({version:h.VERSIONS.v0,properties:G}),layerBlending:null,overlayBlending:null};t.propertiesV0=X;var $={filters:new B({version:h.VERSIONS.v1,properties:Q}),layers:new z({version:h.VERSIONS.v1,properties:L}),effects:new J({version:h.VERSIONS.v1,properties:H}),interactionConfig:new Y({version:h.VERSIONS.v1,properties:K}),layerBlending:null,overlayBlending:null,splitMaps:new q({key:"splitMaps",version:h.VERSIONS.v1}),animationConfig:new m.default({version:h.VERSIONS.v1,properties:{currentTime:null,speed:null},key:"animationConfig"}),editor:new m.default({version:h.VERSIONS.v1,properties:{features:null,visible:null},key:"editor"})};t.propertiesV1=$;var ee=function(e){(0,f.default)(r,e);var t=V(r);function r(){return(0,u.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return this.savePropertiesOrApplySchema(e,t,r)}},{key:"load",value:function(e){return this.loadPropertiesOrApplySchema(e)}}]),r}(m.default);t.VisStateSchemaV1=ee;var te=new m.default({version:h.VERSIONS.v0,properties:X,key:"visState"});t.visStateSchemaV0=te;var re=new ee({version:h.VERSIONS.v1,properties:$,key:"visState"});t.visStateSchemaV1=re;var ne=(a={},(0,v.default)(a,h.VERSIONS.v0,{save:function(e){return te.save(e)},load:function(e){var t;return re.load(null===(t=te.load(e))||void 0===t?void 0:t.visState)}}),(0,v.default)(a,h.VERSIONS.v1,re),a);t.visStateSchema=ne;var ae=ne;t.default=ae},91863:(e,t,r)=>{var n=9007199254740991,a="[object Arguments]",l="[object Function]",o="[object GeneratorFunction]",i="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,u="object"==typeof self&&self&&self.Object===Object&&self,s=i||u||Function("return this")();function c(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var f=Object.prototype,d=f.hasOwnProperty,p=f.toString,v=s.Symbol,y=f.propertyIsEnumerable,h=v?v.isConcatSpreadable:void 0,S=Math.max;function O(e,t,r,n,a){var l=-1,o=e.length;for(r||(r=m),a||(a=[]);++l<o;){var i=e[l];t>0&&r(i)?t>1?O(i,t-1,r,n,a):c(a,i):n||(a[a.length]=i)}return a}function m(e){return b(e)||function(e){return function(e){return k(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?p.call(e):"";return t==l||t==o}(e)}(e)}(e)&&d.call(e,"callee")&&(!y.call(e,"callee")||p.call(e)==a)}(e)||!!(h&&e&&e[h])}function g(e){if("string"==typeof e||function(e){return"symbol"==typeof e||k(e)&&"[object Symbol]"==p.call(e)}(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var b=Array.isArray;function k(e){return!!e&&"object"==typeof e}var V,P,j=(V=function(e,t){return null==e?{}:function(e,t){return function(e,t,r){for(var n=-1,a=t.length,l={};++n<a;){var o=t[n],i=e[o];r(0,o)&&(l[o]=i)}return l}(e=Object(e),t,(function(t,r){return r in e}))}(e,function(e,t){for(var r=-1,n=e?e.length:0,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}(O(t,1),g))},P=S(void 0===P?V.length-1:P,0),function(){for(var e=arguments,t=-1,r=S(e.length-P,0),n=Array(r);++t<r;)n[t]=e[P+t];t=-1;for(var a=Array(P+1);++t<P;)a[t]=e[t];return a[P]=n,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(V,this,a)});e.exports=j}}]);