(self.webpackChunkkeplergl_jupyter=self.webpackChunkkeplergl_jupyter||[]).push([[3315,4410],{69146:(e,t,r)=>{"use strict";e.exports=r(39846),e.exports.version=r(8330).version},39846:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.KeplerGlView=t.KeplerGlModal=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}(r(67464)),a=l(r(48491)),i=l(r(73808));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function y(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}function g(e,t,r){return t=h(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},v.apply(null,arguments)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}t.KeplerGlModal=function(e){function t(){return p(this,t),g(this,t,arguments)}return O(t,e),y(t,[{key:"defaults",value:function(){return f(f({},(e=t,r=this,n=v(h(1&3?e.prototype:e),"defaults",r),function(e){return n.apply(r,e)})([])),{},{_model_name:"KeplerGlModal",_model_module:"keplergl-jupyter",_view_name:"KeplerGlView",_view_module:"keplergl-jupyter",data:{},config:{}});var e,r,n}}])}(o.DOMWidgetModel),t.KeplerGlView=function(e){function t(){return p(this,t),g(this,t,arguments)}return O(t,e),y(t,[{key:"render",value:function(){(0,i.default)("KeplerGlModal start render"),this.keplergl=new a.default,this.keplergl.create(this),this.model.on("change:data",this.data_changed,this),this.model.on("change:config",this.config_changed,this),window.dom=this.el}},{key:"data_changed",value:function(){(0,i.default)("KeplerGlModal start data_changed"),this.keplergl.onDataChange(this)}},{key:"config_changed",value:function(){(0,i.default)("KeplerGlModal start config_change"),this.keplergl.onConfigChange(this)}}])}(o.DOMWidgetView)},92283:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.KEPLER_GL_JUPYTER_VERSION=void 0;var o,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}(r(93345)),i=s(r(94071)),l=r(90693),u=s(r(86070)),c=s(r(22441)),f=s(r(32787));function s(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m,v,h=r(21267),O=h?h.Helmet:null,w=t.KEPLER_GL_JUPYTER_VERSION="0.3.7",j=(0,l.injectComponents)([[l.AddDataButtonFactory,function(){return function(){return a.default.createElement("div",null)}}],[l.SidebarFactory,c.default],[l.PanelHeaderFactory,u.default],[l.CustomPanelsFactory,f.default]]),_=i.default.div(o||(m=["\n  width: 100%;\n  height: 100%;\n  .kepler-gl .ReactModal__Overlay.ReactModal__Overlay--after-open {\n    position: absolute !important;\n  }\n\n  .kepler-gl .side-panel__content > div {\n    display: flex;\n    height: 100%;\n    flex-direction: column;\n  }\n"],v||(v=m.slice(0)),o=Object.freeze(Object.defineProperties(m,{raw:{value:Object.freeze(v)}}))));t.default=function(){var e=(0,a.useRef)(null),t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,a.useState)({}),2),r=t[0],n=t[1],o=function(){if(e.current){var t=e.current.offsetWidth,o=e.current.offsetHeight,a=y(y({},t&&t!==r.width?{width:t}:{}),o&&o!==r.height?{height:o}:{});n(a)}},i=function(){return window.setTimeout(o,500)};return(0,a.useEffect)((function(){return window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}}),[]),a.default.createElement(_,{ref:e,className:"keplergl-widget-container"},O?a.default.createElement(O,null,a.default.createElement("meta",{charSet:"utf-8"}),a.default.createElement("link",{rel:"stylesheet",href:"http://d1a3f4spazzrp4.cloudfront.net/kepler.gl/uber-fonts/4.0.0/superfine.css"}),a.default.createElement("link",{rel:"stylesheet",href:"http://api.tiles.mapbox.com/mapbox-gl-js/v1.1.1/mapbox-gl.css"}),a.default.createElement("link",{rel:"stylesheet",href:"https://unpkg.com/maplibre-gl@^3/dist/maplibre-gl.css"}),a.default.createElement("style",{type:"text/css"},"font-family: ff-clan-web-pro, 'Helvetica Neue', Helvetica, sans-serif;\n                font-weight: 400;\n                font-size: 0.875em;\n                line-height: 1.71429;\n\n                *,\n                *:before,\n                *:after {\n                  -webkit-box-sizing: border-box;\n                  -moz-box-sizing: border-box;\n                  box-sizing: border-box;\n                }\n                body {\n                  margin: 0; padding: 0;\n                }\n                .jupyter-widgets.keplergl-jupyter-widgets {\n                  overflow: hidden;\n                }\n                .p-Widget.p-Panel.jp-OutputArea-output.jupyter-widgets {\n                  overflow: hidden\n                }\n                "),a.default.createElement("script",{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=UA-64694404-19"}),a.default.createElement("script",null,"window.dataLayer=window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-64694404-19', {page_path: '/keplergl-jupyter-widget'});")):null,a.default.createElement(j,{mapboxApiAccessToken:"pk.eyJ1IjoidWNmLW1hcGJveCIsImEiOiJja3RpeXhkaXcxNzJtMnZxbmtkcnJuM3BkIn0.kGmGlkbuWaCBf7_RrZXULg",width:r.width||800,height:r.height||400,appName:"Kepler.gl Jupyter",version:w,getMapboxRef:o}))}},32787:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StyleCopyConfig=t.CopyConfig=void 0;var o,a,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}(r(93345)),l=r(90693),u=r(40349),c=r(70975),f=r(25782),s=(o=r(94071))&&o.__esModule?o:{default:o};function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y={true:"True",false:"False",null:"None"},b=t.StyleCopyConfig=s.default.div.attrs({className:"copy-config"})(a||(a=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  .copy-button {\n    position: absolute;\n    margin-top: -45px;\n    right: 28px;\n  }\n  textarea {\n    overflow-y: scroll;\n    white-space: pre-wrap;\n    width: 100%;\n    height: 100%;\n    resize: none;\n  }\n"]))),g=t.CopyConfig=function(e){var t=e.config,r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,i.useState)(!1),2),n=r[0],o=r[1],a=function(e){return JSON.stringify(e,null,2).replace(/: ([a-z]+)/g,(function(e,t){return": "+y[t]||0}))}(t);return i.default.createElement(b,null,i.default.createElement(f.CopyToClipboard,{text:a,onCopy:function(){return o(!0)},className:"copy-button"},i.default.createElement(l.Button,{width:"100px"},i.default.createElement(l.Icons.Clipboard,{height:"16px"}),n?"Copied!":"Copy")),i.default.createElement(l.TextArea,{value:a,readOnly:!0,selected:!0}))};t.default=function(){var e=function(e){var t=e.activeSidePanel,r=e.visState,n=e.mapState,o=e.mapStyle,a=u.KeplerGlSchema.getConfigToSave({visState:r,mapState:n,mapStyle:o});return"config"===t?i.default.createElement(g,{config:a}):null};e.defaultProps={panels:[{id:"config",label:"Config",iconComponent:l.Icons.CodeAlt}]};var t=(0,l.withState)([c.visStateLens,c.mapStateLens,c.mapStyleLens],(function(e){return e}))(e);return t.defaultProps={panels:[{id:"config",label:"modal.exportMap.json.configTitle",iconComponent:l.Icons.CodeAlt}]},t}},86070:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomPanelHeaderFactory=f,t.default=void 0;var n,o=r(90693),a=r(13081),i=(n=r(93345))&&n.__esModule?n:{default:n},l=r(58462);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(null,arguments)}var c="https://docs.kepler.gl/docs/keplergl-jupyter";function f(){var e=(0,o.PanelHeaderFactory)();return(0,o.withState)([],(function(e){return e}),{toggleModal:a.toggleModal})((function(t){return i.default.createElement(l.IntlProvider,{locale:"en",messages:{"tooltip.documentation":"Documentation"}},i.default.createElement(e,u({},t,{actionItems:[{id:"docs",iconComponent:o.Icons.Docs,href:c,blank:!0,tooltip:"tooltip.documentation",onClick:function(){}}]})))}))}t.default=f},91534:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(r(93345)),o=l(r(7628)),a=r(45321),i=l(r(92283));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){e.id;var t=e.store,r=e.ele,l=function(){return n.default.createElement(a.Provider,{store:t},n.default.createElement(i.default,null))};o.default.render(n.default.createElement(l,null),r)}},22441:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=i(r(93345)),a=r(90693);function i(e){return e&&e.__esModule?e:{default:e}}var l,u,c=i(r(94071)).default.div(n||(l=["\n  .side-panel--container {\n    transform:scale(0.85);\n    transform-origin: top left;\n    height: 117.64%;\n    padding-top: 0;\n    padding-right: 0;\n    padding-bottom: 0;\n    padding-left: 0;\n\n    .side-bar {\n      height: 100%;\n    }\n    .side-bar__close {\n      right: -30px;\n      top: 14px;\n    }\n  }\n"],u||(u=l.slice(0)),n=Object.freeze(Object.defineProperties(l,{raw:{value:Object.freeze(u)}}))));t.default=function(){var e=(0,a.CollapseButtonFactory)(),t=(0,a.SidebarFactory)(e);return function(e){return o.default.createElement(c,null,o.default.createElement(t,e))}}},48491:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addDataConfigToKeplerGl=S,t.dataToDatasets=P,t.default=void 0;var n=r(13081),o=r(40349),a=f(r(49697)),i=f(r(91534)),l=f(r(21382)),u=r(48234),c=f(r(73808));function f(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var m=function(e){return e.model.get("data")},v=function(e){return e.model.get("config")},h=0,O=[n.ActionTypes.REGISTER_ENTRY,n.ActionTypes.DELETE_ENTRY,n.ActionTypes.RENAME_ENTRY,n.ActionTypes.LOAD_MAP_STYLES,n.ActionTypes.LAYER_HOVER];function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hash,r=void 0===t||t,n=e.store;if(n){var a=n.getState().keplerGl.map,i=o.KeplerGlSchema.getConfigToSave(a);return r?JSON.stringify(i):i}return{}}function j(e){if(e)return e.getState().keplerGl.map.visState.datasets}var _=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id="".concat("keplergl","-").concat(h),h++,this.mapUpdateCounter=0},(t=[{key:"create",value:function(e){var t;(0,c.default)("kepler.gl create"),this.store=(0,l.default)(function(r,o){if((0,c.default)(r),r&&!O.includes(r.type)){var a=w({hash:!1,store:o}),i=JSON.stringify(a);t!==i&&this.mapUpdateCounter>2&&((0,c.default)("store state has changed, update model"),(0,c.default)(t),(0,c.default)(i),t=i,e.model.set({config:a}),e.touch()),r.type===n.ActionTypes.UPDATE_MAP&&this.mapUpdateCounter++}}.bind(this));var r=function(e){return e.model.get("height")}(e);e.el.classList.add("jupyter-widgets"),e.el.classList.add("keplergl-jupyter-widgets");var o=a.default.createElement("div");o.setAttribute("id",this.id),o.classList.add("kepler-gl"),o.setAttribute("style"," width: 100%; height: ".concat(r,"px;")),e.el.appendChild(o),(0,i.default)({id:this.id,store:this.store,ele:o});var u=m(e),f=v(e);(0,c.default)("<<<<<<<< render finished! >>>>>>>>>");var s=u&&Object.keys(u).length,p=f&&f.version;s?((0,c.default)("data already in model"),S({data:u,config:f,store:this.store})):p&&((0,c.default)("config already in model"),this.onConfigChange(e))}},{key:"onDataChange",value:function(e){(0,c.default)("kepler.gl onDataChange"),S({data:m(e),store:this.store})}},{key:"onConfigChange",value:function(e){(0,c.default)("kepler.gl onConfigChange");var t=v(e);w({hash:!0,store:this.store})!==JSON.stringify(t)?this.store.dispatch((0,n.addDataToMap)({datasets:Object.values(j(this.store)).map((function(e){return{info:{id:e.id,label:e.label,color:e.color},data:d({fields:e.fields},e.dataContainer instanceof ArrowDataContainer?{cols:e.dataContainer._cols}:{rows:e.allData})}})),config:t,options:{centerMap:!1}})):(0,c.default)("onConfigChange: config is the same as saved in store")}}])&&b(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function S(e){var t=e.data,r=e.config,o=e.options,a=e.store,i=t?P(t):[];(0,c.default)(i);var l=(0,u.loadJupyterData)(i).filter((function(e){return e&&e.data}));(0,c.default)("addDataConfigToKeplerGl"),(0,c.default)(l),(0,c.default)(r);var f=Boolean(r&&r.config&&r.config.mapState);a.dispatch((0,n.addDataToMap)({datasets:l,config:r,options:o||{centerMap:!f}}))}function P(e){return Object.keys(e).map((function(t){return{id:t,data:e[t]}}))}t.default=_},21382:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(88517),o=r(70975);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var i=o.keplerGlReducer.initialState({uiState:{currentModal:null,activeSidePanel:null}}),l=(0,n.combineReducers)({keplerGl:i});t.default=function(e){var t,r=(0,o.enhanceReduxMiddleware)([function(t){return function(r){return function(n){var o=r(n);return"function"==typeof e&&e(n,t),o}}}]),i=[n.applyMiddleware.apply(void 0,(t=r,function(e){if(Array.isArray(e))return a(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))];return(0,n.createStore)(l,{},n.compose.apply(void 0,i))}},48234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadJupyterData=function(e){return e.map(c).map((function(e){return{data:e.data,info:{id:e.id,label:e.id,queryType:e.type,queryOption:"jupyter"}}})).map(f)};var n=r(27112),o=r(18823),a=l(r(73808)),i=l(r(45439));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){(0,a.default)("handleJuptyerDataFormat");var t=e.data,r=e.id,o=t,l="csv";if("object"===u(t))t.columns&&t.data&&t.index?((0,a.default)("data is a dataframe"),l="df"):l="json";else if("string"==typeof t)try{o=JSON.parse(t),l="json"}catch(e){try{i.default.log("parse base64string arrow tabl");var c=Buffer.from(t,"base64").buffer;o=(0,n.tableFromIPC)([new Uint8Array(c)]),l="arrow"}catch(e){}}return{data:o,type:l,id:r}}function f(e){var t,r=e.data,n=e.info;(0,a.default)("processReceivedData");try{t="csv"===n.queryType?(0,o.processCsvData)(r):"json"===n.queryType?(0,o.processGeojson)(r):"df"===n.queryType?function(e){return{fields:e.columns.map((function(e){return{name:e}})),rows:e.data}}(r):"arrow"===n.queryType?(0,o.processArrowBatches)(r.batches):null}catch(e){i.default.log("Kepler.gl fails to parse data, detected data\n    format is ".concat(n.queryType),e)}return{data:t,info:n}}},73808:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,(n=r(45439))&&n.__esModule,t.default=function(){}},80542:()=>{},8330:e=>{"use strict";e.exports={version:"0.3.7"}}}]);